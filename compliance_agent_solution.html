<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆè§„æ™ºèƒ½ä½“éœ€æ±‚æ–¹æ¡ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            background-attachment: fixed;
            color: #fff;
            overflow-x: hidden;
            padding-bottom: 55px;
            margin: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* é¦–é¡µæ ·å¼ */
        .hero-section {
            text-align: center;
            padding: 50px 20px;
            min-height: calc(100vh - 55px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .logo {
            width: 90px;
            height: 90px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .logo svg {
            width: 50px;
            height: 50px;
            fill: #4fc3f7;
        }

        h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 50px;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 0;
            margin-bottom: 0;
            width: 100%;
            max-width: 1400px;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card-icon {
            width: 80px;
            height: 80px;
            background: rgba(79, 195, 247, 0.2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            font-size: 40px;
        }

        .card h3 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #fff;
        }

        .card p {
            font-size: 17px;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
        }

        /* æµç¨‹é¡µé¢æ ·å¼ */
        .process-section {
            padding: 50px 20px;
            min-height: calc(100vh - 55px);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .section-title {
            font-size: 36px;
            margin-bottom: 50px;
            text-align: center;
        }

        .process-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            flex-wrap: wrap;
            gap: 40px;
        }

        .process-step {
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        .step-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: rgba(79, 195, 247, 0.2);
            border: 4px solid #4fc3f7;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 50px;
        }

        .step-label {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .step-desc {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .arrow {
            font-size: 40px;
            color: #4fc3f7;
            margin: 0 20px;
        }

        .processing-core {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin: 30px auto;
            max-width: 1000px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .core-title {
            font-size: 24px;
            margin-bottom: 30px;
            text-align: center;
        }

        .knowledge-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .knowledge-card {
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .knowledge-card.legal {
            background: rgba(33, 150, 243, 0.3);
            border: 2px solid #2196f3;
        }

        .knowledge-card.platform {
            background: rgba(156, 39, 176, 0.3);
            border: 2px solid #9c27b0;
        }

        .knowledge-card.company {
            background: rgba(255, 152, 0, 0.3);
            border: 2px solid #ff9800;
        }

        .knowledge-card.business {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4caf50;
        }

        /* åå°åŠŸèƒ½é¡µé¢æ ·å¼ */
        .admin-section {
            padding: 30px 20px;
            min-height: calc(100vh - 55px);
            background: #f5f5f5;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        .admin-container {
            max-width: 1600px;
            width: 100%;
            margin: 0 auto;
            background: #fff;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .admin-header {
            background: #1976d2;
            color: #fff;
            padding: 12px 20px;
            border-radius: 12px 12px 0 0;
            margin: -25px -25px 15px -25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-sidebar {
            background: #263238;
            color: #fff;
            padding: 20px;
            border-radius: 12px;
            width: 220px;
            flex-shrink: 0;
            margin-right: 20px;
            overflow-y: auto;
        }

        .menu-item {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .menu-item.active {
            background: rgba(255, 255, 255, 0.1);
            font-weight: 600;
        }

        .admin-content {
            display: flex;
            gap: 20px;
            flex: 1;
            min-height: 0;
        }

        .admin-main {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            min-height: 0;
            min-width: 0;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            color: #1976d2;
            border-bottom-color: #1976d2;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .input-area {
            width: 100%;
            min-height: 250px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 20px;
            resize: vertical;
            font-family: inherit;
            box-sizing: border-box;
        }

        .upload-area {
            width: 100%;
            min-height: 250px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            margin-bottom: 20px;
            background: #fafafa;
            transition: all 0.3s;
            cursor: pointer;
            box-sizing: border-box;
        }

        .upload-area:hover {
            border-color: #1976d2;
            background: #f0f7ff;
        }

        .upload-area.dragover {
            border-color: #1976d2;
            background: #e3f2fd;
        }

        .upload-icon {
            font-size: 64px;
            color: #ccc;
            margin-bottom: 20px;
        }

        .upload-text {
            color: #666;
            font-size: 16px;
            text-align: center;
        }

        .file-input {
            display: none;
        }

        .platform-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .submit-btn {
            background: #1976d2;
            color: #fff;
            padding: 12px 40px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            float: right;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #1565c0;
        }

        /* ä»»åŠ¡æ˜ç»†è¡¨æ ¼æ ·å¼ */
        .table-container {
            overflow-x: auto;
            width: 100%;
        }

        table {
            table-layout: fixed;
            width: 100%;
        }

        table th:nth-child(1),
        table td:nth-child(1) {
            width: 60px;
        }

        table th:nth-child(2),
        table td:nth-child(2) {
            width: 150px;
        }

        table th:nth-child(3),
        table td:nth-child(3) {
            width: 300px;
        }

        table th:nth-child(4),
        table td:nth-child(4) {
            width: 150px;
        }

        table th:nth-child(5),
        table td:nth-child(5) {
            width: 120px;
        }

        table th:nth-child(6),
        table td:nth-child(6) {
            width: 120px;
        }

        table th:nth-child(7),
        table td:nth-child(7) {
            width: 100px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        th {
            background: #f5f5f5;
            font-weight: 600;
            color: #333;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            display: inline-block;
        }

        .status-reviewing {
            background: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .platform-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            display: inline-block;
        }

        .platform-xiaohongshu {
            background: #ff2442;
            color: #fff;
        }

        .platform-douyin {
            background: #000;
            color: #fff;
        }

        .platform-kuaishou {
            background: #ff6600;
            color: #fff;
        }

        .btn-view {
            background: #1976d2;
            color: #fff;
            padding: 6px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .btn-view:hover {
            background: #1565c0;
        }

        .btn-delete {
            background: #dc3545;
            color: #fff;
            padding: 6px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .download-btn {
            background: #e3f2fd;
            color: #1976d2;
            padding: 12px 30px;
            border: 1px solid #1976d2;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 15px;
            transition: all 0.3s;
        }

        .download-btn:hover {
            background: #1976d2;
            color: #fff;
        }

        /* å®¡æ ¸ç»“æœå¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .modal-content {
            background: #fff;
            border-radius: 20px;
            max-width: 1200px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            color: #333;
        }

        .modal-header {
            background: #1976d2;
            color: #fff;
            padding: 20px 30px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .original-content {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
            line-height: 1.8;
        }

        .highlight {
            background: #ffebee;
            color: #c62828;
            padding: 2px 4px;
            border-radius: 4px;
            position: relative;
        }

        .highlight::before {
            content: attr(data-num);
            position: absolute;
            top: -8px;
            right: -8px;
            background: #c62828;
            color: #fff;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .suggestions {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
        }

        .suggestion-item {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #1976d2;
        }

        .suggestion-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #c62828;
        }

        .rule-interpretation {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .modification-suggestion {
            background: #f1f8e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .rule-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            margin-top: 10px;
        }

        .tag-legal {
            background: #2196f3;
            color: #fff;
        }

        .tag-platform {
            background: #9c27b0;
            color: #fff;
        }

        .tag-business {
            background: #4caf50;
            color: #fff;
        }

        .tag-company {
            background: #ff9800;
            color: #fff;
        }

        /* åˆ†é¡µæ§åˆ¶ */
        .pagination {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-section .pagination {
            background: #f5f5f5;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .admin-section .pagination button {
            background: rgba(25, 118, 210, 0.1);
            color: #1976d2;
            border: 1px solid rgba(25, 118, 210, 0.3);
        }

        .admin-section .pagination button:hover {
            background: rgba(25, 118, 210, 0.2);
        }

        .admin-section .pagination .page-info {
            color: #333;
        }

        .pagination button {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.25);
            padding: 8px 16px;
            margin: 0 8px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            min-width: 40px;
        }

        .pagination button:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .pagination button:active {
            transform: scale(0.95);
        }

        .pagination .page-info {
            display: inline-block;
            margin: 0 15px;
            font-size: 16px;
            color: #fff;
            font-weight: 500;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            h1 {
                font-size: 32px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .process-flow {
                flex-direction: column;
            }

            .arrow {
                transform: rotate(90deg);
                margin: 20px 0;
            }

            .modal-body {
                grid-template-columns: 1fr;
            }

            .admin-content {
                flex-direction: column;
            }

            .admin-sidebar {
                margin-right: 0;
                margin-bottom: 20px;
            }
        }

        /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* æ–°å¢åŠŸèƒ½æ ·å¼ */
        .highlight-clickable {
            background: #ffebee;
            color: #c62828;
            padding: 2px 4px;
            border-radius: 4px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .highlight-clickable:hover {
            background: #ffcdd2;
            box-shadow: 0 2px 8px rgba(198, 40, 40, 0.3);
        }

        .highlight-clickable::after {
            content: attr(data-num);
            position: absolute;
            top: -8px;
            right: -8px;
            background: #c62828;
            color: #fff;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
        }

        /* å®¡æ ¸å»ºè®®å¼¹çª— */
        .suggestion-popup {
            position: absolute;
            background: #fff;
            border: 2px solid #1976d2;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            min-width: 300px;
            max-width: 400px;
            display: none;
        }

        .suggestion-popup.active {
            display: block;
        }

        .suggestion-popup .popup-title {
            font-weight: 600;
            color: #c62828;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .suggestion-popup .replacement-words {
            background: #f1f8e9;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .suggestion-popup .replacement-words strong {
            color: #4caf50;
        }

        .suggestion-popup .replacement-word-item {
            display: inline-block;
            background: #fff;
            padding: 4px 8px;
            margin: 4px 4px 0 0;
            border-radius: 4px;
            border: 1px solid #4caf50;
            cursor: pointer;
            transition: all 0.2s;
        }

        .suggestion-popup .replacement-word-item:hover {
            background: #4caf50;
            color: #fff;
        }

        /* äººå·¥å®¡æ ¸å‹¾é€‰æ¡† */
        .manual-review-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 15px 0;
            padding: 10px;
            background: #fff3cd;
            border-radius: 6px;
            border: 1px solid #ffc107;
        }

        .manual-review-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* ä¸€é”®ä¿®æ”¹æŒ‰é’® */
        .apply-all-btn {
            background: #4caf50;
            color: #fff;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s;
        }

        .apply-all-btn:hover {
            background: #45a049;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        /* å†…å®¹å¯¹æ¯”è§†å›¾ */
        .comparison-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-panel {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .comparison-panel h4 {
            margin-bottom: 15px;
            color: #333;
        }

        .comparison-panel.original {
            border-color: #ff9800;
        }

        .comparison-panel.modified {
            border-color: #4caf50;
        }

        /* äººå·¥ä¿®æ”¹è¾“å…¥æ¡† */
        .manual-edit-section {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }

        .manual-edit-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #90caf9;
            border-radius: 4px;
            margin: 8px 0;
        }

        .manual-edit-textarea {
            width: 100%;
            min-height: 60px;
            padding: 8px;
            border: 1px solid #90caf9;
            border-radius: 4px;
            margin: 8px 0;
            resize: vertical;
        }

        /* èµ„è´¨å®¡æ ¸ä¼˜å…ˆæ ‡è¯† */
        .qualification-badge {
            background: #f44336;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 8px;
        }

        .qualification-first {
            order: -1;
            border-left-color: #f44336 !important;
        }

        /* çŸ¥è¯†åº“ç®¡ç†æ ·å¼ */
        .knowledge-tree {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .tree-node {
            margin: 10px 0;
            padding-left: 20px;
        }

        .tree-node-level1 {
            font-weight: 600;
            font-size: 16px;
            color: #1976d2;
            margin: 15px 0 10px 0;
            padding-left: 0;
        }

        .tree-node-level2 {
            font-weight: 500;
            font-size: 14px;
            color: #424242;
            margin: 8px 0 5px 0;
        }

        .tree-node-level3 {
            font-size: 13px;
            color: #757575;
            margin: 5px 0;
        }

        .tree-toggle {
            cursor: pointer;
            user-select: none;
        }

        .tree-toggle::before {
            content: 'â–¶';
            display: inline-block;
            margin-right: 5px;
            transition: transform 0.3s;
        }

        .tree-toggle.expanded::before {
            transform: rotate(90deg);
        }

        .tree-children {
            display: none;
            margin-left: 20px;
        }

        .tree-children.expanded {
            display: block;
        }

        .add-rule-btn {
            background: #1976d2;
            color: #fff;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .add-rule-btn:hover {
            background: #1565c0;
            transform: scale(1.05);
        }

        /* çŸ¥è¯†åº“æœç´¢æ¡† */
        .knowledge-search {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .search-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #1976d2;
        }

        .search-btn {
            background: #1976d2;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .search-btn:hover {
            background: #1565c0;
        }

        .search-results {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .search-result-item {
            padding: 10px;
            margin: 5px 0;
            background: #f5f5f5;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-result-item:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        .search-result-item.highlight {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
        }

        /* æ·»åŠ è§„åˆ™å¼¹çª— */
        .rule-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .rule-modal.active {
            display: flex;
        }

        .rule-modal-content {
            background: #fff;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .rule-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .rule-modal-header h3 {
            margin: 0;
            color: #1976d2;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #1976d2;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .btn-cancel {
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn-cancel:hover {
            background: #e0e0e0;
        }

        .btn-save {
            background: #4caf50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn-save:hover {
            background: #45a049;
        }

        /* è§„åˆ™è¯¦æƒ…å±•ç¤º */
        .rule-detail-card {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .rule-detail-card:hover {
            border-color: #1976d2;
            box-shadow: 0 4px 12px rgba(25, 118, 210, 0.1);
        }

        .rule-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .rule-detail-title {
            font-weight: 600;
            color: #1976d2;
            font-size: 15px;
        }

        .rule-detail-meta {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        .rule-detail-content {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            margin-top: 10px;
        }

        .rule-tags {
            display: flex;
            gap: 5px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .rule-tag-small {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            background: #e3f2fd;
            color: #1976d2;
        }

        /* æ–°å¢è§„åˆ™åŠ¨ç”»æ•ˆæœ */
        .rule-item-new {
            animation: slideIn 0.5s ease-out;
            background: #e8f5e9 !important;
            border-left: 4px solid #4caf50 !important;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* è§„åˆ™ç»Ÿè®¡ä¿¡æ¯ */
        .knowledge-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: #fff;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 150px;
        }

        .stat-card .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
        }

        .stat-card .stat-label {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        /* å¯¼å‡ºæŒ‰é’®ç»„ */
        .export-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .export-btn {
            background: #2196f3;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .export-btn:hover {
            background: #1976d2;
        }

        .export-btn.copy {
            background: #ff9800;
        }

        .export-btn.copy:hover {
            background: #f57c00;
        }
    </style>
</head>
<body>
    <!-- é¡µé¢1: é¦–é¡µ -->
    <div class="page active" id="page1">
        <div class="hero-section">
            <div class="logo">
                <svg viewBox="0 0 24 24">
                    <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.7C8,12.1 8.6,11.5 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
                </svg>
            </div>
            <h1>åˆè§„æ™ºèƒ½ä½“éœ€æ±‚æ–¹æ¡ˆ</h1>
            <p class="subtitle">V1.0 | æ™ºèƒ½å®¡æ ¸ ãƒ» å¤šå¹³å°é€‚é… ãƒ» é«˜æ•ˆé—­ç¯</p>
            
            <div class="cards-grid">
                <div class="card">
                    <div class="card-icon">ğŸ“š</div>
                    <h3>çŸ¥è¯†åº“ä½“ç³»</h3>
                    <p>è¦†ç›–å›½å®¶æ³•å¾‹ã€å¹³å°è§„åˆ™(æŠ–éŸ³/å°çº¢ä¹¦ç­‰)ã€å…¬å¸åŠä¸šåŠ¡è§„åˆ™çš„å››å±‚çŸ¥è¯†æ¶æ„ã€‚</p>
                </div>
                <div class="card">
                    <div class="card-icon">âš™ï¸</div>
                    <h3>æ™ºèƒ½å®¡æ ¸å¼•æ“</h3>
                    <p>è¾“å…¥è§£æâ†’ æµç¨‹ç¼–æ’â†’ å¹¶è¡ŒAgentå¤„ç†â†’ ç»“æœèšåˆ,500å­—/5sæé€Ÿå“åº”ã€‚</p>
                </div>
                <div class="card">
                    <div class="card-icon">âœ…</div>
                    <h3>å…¨æµç¨‹é—­ç¯</h3>
                    <p>ä»å•æ¡/æ‰¹é‡å‘èµ·åˆ°ä»»åŠ¡æ˜ç»†è¿½è¸ª,å†åˆ°é¢—ç²’åº¦æç»†çš„è¿è§„è§£è¯»ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µé¢2: ç³»ç»Ÿäº¤äº’æµç¨‹ -->
    <div class="page" id="page2">
        <div class="process-section">
            <div class="container">
                <h2 class="section-title">ä¸€ã€ç³»ç»Ÿäº¤äº’æµç¨‹</h2>
                <div class="process-flow">
                    <div class="process-step">
                        <div class="step-circle">â†’</div>
                        <div class="step-label">è¾“å…¥å†…å®¹è§£æ</div>
                        <div class="step-desc">æ–‡æ¡ˆ/ä¸šåŠ¡èŠ‚ç‚¹</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="process-step" style="flex: 2;">
                        <div class="processing-core">
                            <div class="core-title">æµç¨‹ç¼–æ’ (ä¸²è¡Œ)</div>
                            <div class="knowledge-grid">
                                <div class="knowledge-card legal">
                                    <div style="font-size: 30px; margin-bottom: 10px;">ğŸ›¡ï¸</div>
                                    <div style="font-weight: 600;">æ³•å¾‹åˆè§„åº“</div>
                                </div>
                                <div class="knowledge-card platform">
                                    <div style="font-size: 30px; margin-bottom: 10px;">ğŸ“±</div>
                                    <div style="font-weight: 600;">å¹³å°è§„åˆ™åº“</div>
                                    <div style="font-size: 12px; margin-top: 5px;">(æŠ–éŸ³/å°çº¢ä¹¦...)</div>
                                </div>
                                <div class="knowledge-card company">
                                    <div style="font-size: 30px; margin-bottom: 10px;">ğŸ¢</div>
                                    <div style="font-weight: 600;">å…¬å¸è§„åˆ™åº“</div>
                                </div>
                                <div class="knowledge-card business">
                                    <div style="font-size: 30px; margin-bottom: 10px;">ğŸ“‹</div>
                                    <div style="font-weight: 600;">ä¸šåŠ¡è§„åˆ™åº“</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="process-step">
                        <div class="step-circle" style="border-color: #4caf50;">âœ“</div>
                        <div class="step-label">ç»“æœèšåˆè¾“å‡º</div>
                        <div class="step-desc">JSONæ ¼å¼åŒ–/æ ‡è®°å»ºè®®</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µé¢3: åå°åŠŸèƒ½ - å‘èµ·å®¡æ ¸ -->
    <div class="page" id="page3">
        <div class="admin-section">
            <div class="admin-container">
                <div class="admin-header">
                    <div>
                        <h2 style="margin: 0;">åˆè§„æ™ºèƒ½ä½“ç®¡ç†ç³»ç»Ÿ</h2>
                    </div>
                    <div style="display: flex; gap: 20px; align-items: center;">
                        <span>æ“ä½œæ‰‹å†Œ</span>
                        <span>é”å±</span>
                        <span>å…¨å±</span>
                        <span>å®‰** (15072817)</span>
                    </div>
                </div>
                <div style="margin-bottom: 20px; color: #666;">
                    <strong>äºŒã€åå°åŠŸèƒ½:å‘èµ·å®¡æ ¸</strong><br>
                    <span style="font-size: 14px;">æ”¯æŒå•æ¡æ–‡æœ¬å½•å…¥ä¸Excelæ‰¹é‡å¯¼å…¥,å¤šå¹³å°å¹¶è¡Œæ ¡éªŒã€‚</span>
                </div>
                <div class="admin-content">
                    <div class="admin-sidebar">
                        <div style="margin-bottom: 20px; font-size: 12px; color: rgba(255,255,255,0.7);">MAIN NAVIGATION</div>
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <span>ğŸ </span>
                                <span>åˆè§„æ™ºèƒ½ä½“</span>
                                <span>â–¼</span>
                            </div>
                            <div style="padding-left: 30px;">
                                <div class="menu-item active" onclick="navigateToPage(3)">å‘èµ·å®¡æ ¸</div>
                                <div class="menu-item" onclick="navigateToPage(4)">å®¡æ ¸ä»»åŠ¡æ˜ç»†</div>
                                <div class="menu-item" onclick="navigateToPage(6)">çŸ¥è¯†åº“ç»´æŠ¤</div>
                            </div>
                        </div>
                    </div>
                    <div class="admin-main">
                        <h3 style="margin-bottom: 30px;">å‘èµ·å®¡æ ¸</h3>
                        <div class="tabs">
                            <button class="tab active" onclick="switchTab('single', this)">å•æ¡å½•å…¥</button>
                            <button class="tab" onclick="switchTab('batch', this)">æ‰¹é‡å¯¼å…¥</button>
                        </div>
                        
                        <div class="tab-content active" id="single-tab">
                            <textarea class="input-area" id="single-input" placeholder="è¯·è¾“å…¥éœ€è¦å®¡æ ¸çš„å†…å®¹...">å¤æ˜Ÿä¿å¾·ä¿¡å¤§é»„èœ‚16å·å°‘å„¿é‡ç–¾é™©(æ——èˆ°ç‰ˆ)
ã€æš–å¿ƒå®ˆæŠ¤,ç†èµ”è§è¯ã€‘
ä¸ºå­©å­é€‰æ‹©ä¸€ä»½ä¿éšœï¼Œå°±æ˜¯ä¸ºä»–ä»¬çš„æœªæ¥æŠ•èµ„ã€‚è¿™ä»½ä¿é™©ä¸ä»…æä¾›å®å®åœ¨åœ¨çš„é’±ï¼Œè¿˜èƒ½ç¡®ä¿å­©å­è·å¾—æœ€å¥½çš„åŒ»ç–—èµ„æºã€‚å­©å­çš„æˆé•¿ä¹‹è·¯å……æ»¡æœªçŸ¥ï¼Œä½†æˆ‘ä»¬å¯ä»¥æå‰åšå¥½å‡†å¤‡ã€‚</textarea>
                        </div>
                        
                        <div class="tab-content" id="batch-tab">
                            <div class="upload-area" id="upload-area" onclick="document.getElementById('file-input').click()">
                                <div class="upload-icon">â˜ï¸</div>
                                <div class="upload-text">å¦‚éœ€åŒæ—¶å®¡æ ¸å¤šæ¡å†…å®¹,è¯·æŒ‰ç…§æ¨¡æ¿å¡«å†™å,æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œ</div>
                                <div class="upload-text" style="margin-top: 10px; font-size: 14px; color: #999;">æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</div>
                                <input type="file" id="file-input" class="file-input" accept=".xlsx,.xls,.csv">
                            </div>
                            <div id="file-info" style="display: none; padding: 15px; background: #e3f2fd; border-radius: 8px; margin-bottom: 20px;">
                                <span id="file-name"></span>
                                <button onclick="removeFile()" style="float: right; background: #dc3545; color: #fff; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">åˆ é™¤</button>
                            </div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 10px; font-weight: 600;">è¯·é€‰æ‹©è®¡åˆ’å‘å¸ƒå¹³å°:</label>
                            <div class="platform-checkboxes">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="select-all">
                                    <label for="select-all">å…¨é€‰</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="xiaohongshu" checked>
                                    <label for="xiaohongshu">å°çº¢ä¹¦</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="douyin" checked>
                                    <label for="douyin">æŠ–éŸ³</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="kuaishou" checked>
                                    <label for="kuaishou">å¿«æ‰‹</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="video" checked>
                                    <label for="video">è§†é¢‘å·</label>
                                </div>
                            </div>
                        </div>
                        <div class="manual-review-checkbox">
                            <input type="checkbox" id="manual-review">
                            <label for="manual-review" style="font-weight: 600; color: #856404;">é£æ§äººå·¥å®¡æ ¸</label>
                            <span style="font-size: 13px; color: #856404; margin-left: 10px;">å‹¾é€‰åï¼Œé‡è¦å†…å®¹æˆ–æœ‰ç–‘è™‘å†…å®¹å°†æäº¤äººå·¥å®¡æ ¸</span>
                        </div>
                        <div style="text-align: right; margin-top: 30px;">
                            <button class="download-btn" onclick="downloadTemplate()">ä¸‹è½½æ¨¡æ¿</button>
                            <button class="submit-btn" onclick="submitReview()">æäº¤å®¡æ ¸</button>
                        </div>
                        <div style="clear: both;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µé¢4: åå°åŠŸèƒ½ - å®¡æ ¸ä»»åŠ¡æ˜ç»† -->
    <div class="page" id="page4">
        <div class="admin-section">
            <div class="admin-container">
                <div class="admin-header">
                    <div>
                        <h2 style="margin: 0;">åˆè§„æ™ºèƒ½ä½“ç®¡ç†ç³»ç»Ÿ</h2>
                    </div>
                    <div style="display: flex; gap: 20px; align-items: center;">
                        <span>æ“ä½œæ‰‹å†Œ</span>
                        <span>å®‰** (15072817)</span>
                    </div>
                </div>
                <div style="margin-bottom: 20px; color: #666;">
                    <strong>ä¸‰ã€åå°åŠŸèƒ½:å®¡æ ¸ä»»åŠ¡æ˜ç»†</strong><br>
                    <span style="font-size: 14px;">ä»»åŠ¡çŠ¶æ€è¿½è¸ª,æ”¯æŒæŒ‰æ–‡æœ¬ã€çŠ¶æ€ã€å¹³å°ç­‰å¤šç»´åº¦ç­›é€‰æŸ¥è¯¢ã€‚</span>
                </div>
                <div class="admin-content">
                    <div class="admin-sidebar">
                        <div style="margin-bottom: 20px; font-size: 12px; color: rgba(255,255,255,0.7);">MAIN NAVIGATION</div>
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <span>ğŸ </span>
                                <span>åˆè§„æ™ºèƒ½ä½“</span>
                                <span>â–¼</span>
                            </div>
                            <div style="padding-left: 30px;">
                                <div class="menu-item" onclick="navigateToPage(3)">å‘èµ·å®¡æ ¸</div>
                                <div class="menu-item active" onclick="navigateToPage(4)">å®¡æ ¸ä»»åŠ¡æ˜ç»†</div>
                                <div class="menu-item" onclick="navigateToPage(6)">çŸ¥è¯†åº“ç»´æŠ¤</div>
                            </div>
                        </div>
                    </div>
                    <div class="admin-main">
                        <h3 style="margin-bottom: 30px;">å®¡æ ¸ä»»åŠ¡æ˜ç»†</h3>
                        <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                            <input type="text" id="search-text" placeholder="æ–‡æœ¬å†…å®¹" style="padding: 10px; border: 1px solid #e0e0e0; border-radius: 4px; flex: 1; min-width: 200px;">
                            <select id="status-filter" style="padding: 10px; border: 1px solid #e0e0e0; border-radius: 4px;">
                                <option>æ‰€æœ‰</option>
                                <option>å®¡æ ¸ä¸­</option>
                                <option>å®¡æ ¸å®Œæˆ</option>
                            </select>
                            <select id="platform-filter" style="padding: 10px; border: 1px solid #e0e0e0; border-radius: 4px;">
                                <option>æ‰€æœ‰</option>
                                <option>å°çº¢ä¹¦</option>
                                <option>æŠ–éŸ³</option>
                                <option>å¿«æ‰‹</option>
                            </select>
                            <button class="submit-btn" style="float: none; background: #4caf50;" onclick="searchTasks()">æŸ¥è¯¢</button>
                            <button class="submit-btn" style="float: none; background: #ff9800;" onclick="addNewTask()">æ–°å¢ä»»åŠ¡</button>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>åºå·</th>
                                        <th>ä»»åŠ¡ID</th>
                                        <th>æ–‡æœ¬å†…å®¹</th>
                                        <th>æäº¤æ—¶é—´</th>
                                        <th>å‘å¸ƒå¹³å°</th>
                                        <th>å®¡æ ¸çŠ¶æ€</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>T2024011701</td>
                                        <td>å¤æ˜Ÿä¿å¾·ä¿¡å¤§é»„èœ‚16å·å°‘å„¿é‡ç–¾é™©...</td>
                                        <td>2024/1/17 10:00</td>
                                        <td><span class="platform-badge platform-xiaohongshu">å°çº¢ä¹¦</span></td>
                                        <td><span class="status-badge status-reviewing">å®¡æ ¸ä¸­</span></td>
                                        <td><button class="btn-delete" onclick="deleteTask('T2024011701')">åˆ é™¤</button></td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>T2023122205</td>
                                        <td>...ä»¬éœ€è¦çš„...</td>
                                        <td>2023/12/22 14:30</td>
                                        <td><span class="platform-badge platform-douyin">æŠ–éŸ³</span></td>
                                        <td><span class="status-badge status-completed">å®¡æ ¸å®Œæˆ</span></td>
                                        <td><button class="btn-view" onclick="viewDetail(2)">æŸ¥çœ‹</button></td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>T2023121002</td>
                                        <td>å…¨ç½‘æœ€ä½ä»·,é”™è¿‡ç­‰ä¸€å¹´!</td>
                                        <td>2023/12/10 09:15</td>
                                        <td><span class="platform-badge platform-kuaishou">å¿«æ‰‹</span></td>
                                        <td><span class="status-badge status-completed">å®¡æ ¸å®Œæˆ</span></td>
                                        <td><button class="btn-view" onclick="viewDetail(3)">æŸ¥çœ‹</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µé¢5: å®¡æ ¸ç»“æœè¯¦æƒ… -->
    <div class="page" id="page5">
        <div class="admin-section">
            <div class="admin-container">
                <div style="margin-bottom: 20px; color: #666;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>å››ã€å®¡æ ¸ç»“æœè¯¦æƒ… (å¼¹çª—è§†å›¾)</strong><br>
                            <span style="font-size: 14px;">é«˜äº®æ ‡æ³¨è¿è§„ç‚¹,å¹¶æä¾›è§„åˆ™è§£è¯»ä¸ä¿®æ”¹å»ºè®®ã€‚</span>
                        </div>
                        <button class="submit-btn" style="float: none;" onclick="backToList()">è¿”å›åˆ—è¡¨</button>
                    </div>
                </div>
                <div style="background: #fff; border-radius: 12px; padding: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #e0e0e0;">
                        <div>
                            <h3 style="margin: 0 0 10px 0;">æŸ¥çœ‹æ–‡æœ¬å®¡æ ¸è¯¦æƒ…</h3>
                            <div style="font-size: 14px; color: #666;">
                                <span>æäº¤äºº: ç”¨æˆ·å</span> | 
                                <span>æäº¤æ—¶é—´: 2024/1/1 00:00:00</span> | 
                                <span>è®¡åˆ’å‘å¸ƒå¹³å°: å°çº¢ä¹¦</span>
                            </div>
                        </div>
                        <button style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;" onclick="backToList()">Ã—</button>
                    </div>
                    <!-- æ“ä½œæŒ‰é’®ç»„ -->
                    <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                        <button class="apply-all-btn" onclick="applyAllSuggestions()">ä¸€é”®å…¨éƒ¨ä¿®æ”¹</button>
                        <div class="export-buttons">
                            <button class="export-btn copy" onclick="copyModifiedContent()">å¤åˆ¶ä¿®æ”¹åå†…å®¹</button>
                            <button class="export-btn" onclick="exportContent()">å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š</button>
                        </div>
                    </div>

                    <!-- æ ‡ç­¾é¡µï¼šåŸæ–‡/å¯¹æ¯”è§†å›¾ -->
                    <div class="tabs" style="margin-bottom: 20px;">
                        <button class="tab active" onclick="switchReviewTab('original', this)">åŸæ–‡å†…å®¹</button>
                        <button class="tab" onclick="switchReviewTab('comparison', this)">å¯¹æ¯”æŸ¥çœ‹</button>
                        <button class="tab" onclick="switchReviewTab('modified', this)">ä¿®æ”¹åå†…å®¹</button>
                    </div>

                    <!-- åŸæ–‡å†…å®¹æ ‡ç­¾é¡µ -->
                    <div class="tab-content active" id="review-original-tab">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                            <div>
                                <h4 style="margin-bottom: 15px;">åŸæ–‡å†…å®¹ <span style="font-size: 12px; color: #999;">(ç‚¹å‡»æ ‡çº¢æ–‡å­—æŸ¥çœ‹å»ºè®®)</span></h4>
                                <div class="original-content" id="original-content-text">
                                    å¤æ˜Ÿä¿å¾·ä¿¡å¤§é»„èœ‚16å·<span class="highlight-clickable" data-num="1" data-id="issue1" onclick="showSuggestionPopup(event, 'issue1')">å°‘å„¿é‡ç–¾é™©</span>(æ——èˆ°ç‰ˆ)<br><br>
                                    ã€æš–å¿ƒå®ˆæŠ¤,ç†èµ”è§è¯ã€‘<br><br>
                                    ä¸ºå­©å­é€‰æ‹©ä¸€ä»½ä¿éšœï¼Œå°±æ˜¯ä¸ºä»–ä»¬çš„æœªæ¥æŠ•èµ„ã€‚è¿™ä»½ä¿é™©ä¸ä»…æä¾›<span class="highlight-clickable" data-num="2" data-id="issue2" onclick="showSuggestionPopup(event, 'issue2')">å®å®åœ¨åœ¨çš„é’±</span>ï¼Œè¿˜èƒ½ç¡®ä¿å­©å­è·å¾—<span class="highlight-clickable" data-num="3" data-id="issue3" onclick="showSuggestionPopup(event, 'issue3')">æœ€å¥½çš„åŒ»ç–—èµ„æº</span>ã€‚<span class="highlight-clickable" data-num="4" data-id="issue4" onclick="showSuggestionPopup(event, 'issue4')">å­©å­çš„æˆé•¿ä¹‹è·¯å……æ»¡æœªçŸ¥</span>ï¼Œä½†æˆ‘ä»¬å¯ä»¥æå‰åšå¥½å‡†å¤‡ã€‚
                                </div>
                            </div>
                            <div>
                                <h4 style="margin-bottom: 15px;">å®¡æ ¸å»ºè®® <span style="font-size: 12px; color: #999;">(æŒ‰ä¼˜å…ˆçº§æ’åº)</span></h4>
                                <div class="suggestions" id="suggestions-list">
                                    <!-- èµ„è´¨å®¡æ ¸ä¼˜å…ˆæ˜¾ç¤º -->
                                    <div class="suggestion-item qualification-first" data-id="issue1">
                                        <div class="suggestion-title">
                                            â‘  èµ„è´¨å®¡æ ¸ï¼šæ— ç›¸å…³èµ„è´¨<span class="qualification-badge">ä¼˜å…ˆ</span>
                                        </div>
                                        <div class="rule-interpretation">
                                            <strong>è§„åˆ™è§£è¯»:</strong> æˆ‘å…¬å¸æ— åŒ»ç–—ã€ä¿é™©ã€é‡‘èç›¸å…³èµ„è´¨/ç‰Œç…§ï¼Œå› æ­¤ä¸èƒ½æåŠç›¸å…³å†…å®¹ã€‚
                                        </div>
                                        <div class="modification-suggestion">
                                            <strong>æ›¿æ¢è¯å»ºè®®:</strong>
                                            <div class="replacement-words">
                                                <span class="replacement-word-item" onclick="applyReplacement('issue1', 'å°‘å„¿ä¿éšœè®¡åˆ’')">å°‘å„¿ä¿éšœè®¡åˆ’</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue1', 'å°‘å„¿å¥åº·ä¿éšœ')">å°‘å„¿å¥åº·ä¿éšœ</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue1', 'ä¿éšœæ–¹æ¡ˆ')">ä¿éšœæ–¹æ¡ˆ</span>
                                            </div>
                                        </div>
                                        <div class="manual-edit-section">
                                            <strong>äººå·¥ä¿®æ”¹:</strong>
                                            <input type="text" class="manual-edit-input" id="manual-replace-issue1" placeholder="æ‰‹åŠ¨è¾“å…¥æ›¿ä»£è¯">
                                            <textarea class="manual-edit-textarea" id="manual-note-issue1" placeholder="è¡¥å……å®¡æ ¸æ„è§ï¼ˆå¯é€‰ï¼‰"></textarea>
                                            <button class="add-rule-btn" onclick="saveManualEdit('issue1')">ä¿å­˜ä¿®æ”¹</button>
                                        </div>
                                        <span class="rule-tag tag-legal">èµ„è´¨å®¡æ ¸</span>
                                    </div>
                                    <div class="suggestion-item" data-id="issue2">
                                        <div class="suggestion-title">â‘¡ ä¸ç¬¦åˆç¤¾åŒºè§„èŒƒ</div>
                                        <div class="rule-interpretation">
                                            <strong>è§„åˆ™è§£è¯»:</strong> ä¸¥ç¦ä½¿ç”¨ç‚«å¯Œã€è¿‡äºç›´æ¥çš„é‡‘é’±è¯±å¯¼ç±»è¯æ±‡ã€‚
                                        </div>
                                        <div class="modification-suggestion">
                                            <strong>æ›¿æ¢è¯å»ºè®®:</strong>
                                            <div class="replacement-words">
                                                <span class="replacement-word-item" onclick="applyReplacement('issue2', 'çœŸåˆ‡çš„ä¿éšœ')">çœŸåˆ‡çš„ä¿éšœ</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue2', 'å®é™…ä¿éšœ')">å®é™…ä¿éšœ</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue2', 'ä¿éšœæ”¯æŒ')">ä¿éšœæ”¯æŒ</span>
                                            </div>
                                        </div>
                                        <div class="manual-edit-section">
                                            <strong>äººå·¥ä¿®æ”¹:</strong>
                                            <input type="text" class="manual-edit-input" id="manual-replace-issue2" placeholder="æ‰‹åŠ¨è¾“å…¥æ›¿ä»£è¯">
                                            <textarea class="manual-edit-textarea" id="manual-note-issue2" placeholder="è¡¥å……å®¡æ ¸æ„è§ï¼ˆå¯é€‰ï¼‰"></textarea>
                                            <button class="add-rule-btn" onclick="saveManualEdit('issue2')">ä¿å­˜ä¿®æ”¹</button>
                                        </div>
                                        <span class="rule-tag tag-platform">å°çº¢ä¹¦</span>
                                    </div>
                                    <div class="suggestion-item" data-id="issue3">
                                        <div class="suggestion-title">â‘¢ ä¸ç¬¦åˆä¸šåŠ¡è¦æ±‚</div>
                                        <div class="rule-interpretation">
                                            <strong>è§„åˆ™è§£è¯»:</strong> å¹¿å‘Šä¸­ä¸¥ç¦ä½¿ç”¨"æœ€é«˜çº§"ã€"æœ€ä½³"ã€"æœ€å¥½"ç­‰ç»å¯¹åŒ–ç”¨è¯­ã€‚
                                        </div>
                                        <div class="modification-suggestion">
                                            <strong>æ›¿æ¢è¯å»ºè®®:</strong>
                                            <div class="replacement-words">
                                                <span class="replacement-word-item" onclick="applyReplacement('issue3', 'ä¼˜è´¨çš„åŒ»ç–—èµ„æº')">ä¼˜è´¨çš„åŒ»ç–—èµ„æº</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue3', 'ä¸“ä¸šåŒ»ç–—èµ„æº')">ä¸“ä¸šåŒ»ç–—èµ„æº</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue3', 'å¯é åŒ»ç–—æ”¯æŒ')">å¯é åŒ»ç–—æ”¯æŒ</span>
                                            </div>
                                        </div>
                                        <div class="manual-edit-section">
                                            <strong>äººå·¥ä¿®æ”¹:</strong>
                                            <input type="text" class="manual-edit-input" id="manual-replace-issue3" placeholder="æ‰‹åŠ¨è¾“å…¥æ›¿ä»£è¯">
                                            <textarea class="manual-edit-textarea" id="manual-note-issue3" placeholder="è¡¥å……å®¡æ ¸æ„è§ï¼ˆå¯é€‰ï¼‰"></textarea>
                                            <button class="add-rule-btn" onclick="saveManualEdit('issue3')">ä¿å­˜ä¿®æ”¹</button>
                                        </div>
                                        <span class="rule-tag tag-business">ä¸šåŠ¡è§„åˆ™</span>
                                    </div>
                                    <div class="suggestion-item" data-id="issue4">
                                        <div class="suggestion-title">â‘£ ä¸ç¬¦åˆå…¬å¸è§„èŒƒ</div>
                                        <div class="rule-interpretation">
                                            <strong>è§„åˆ™è§£è¯»:</strong> é¿å…ä½¿ç”¨å¯èƒ½å¼•èµ·ç„¦è™‘çš„è¡¨è¿°ã€‚
                                        </div>
                                        <div class="modification-suggestion">
                                            <strong>æ›¿æ¢è¯å»ºè®®:</strong>
                                            <div class="replacement-words">
                                                <span class="replacement-word-item" onclick="applyReplacement('issue4', 'å­©å­çš„æˆé•¿éœ€è¦æˆ‘ä»¬çš„é™ªä¼´ä¸æ”¯æŒ')">å­©å­çš„æˆé•¿éœ€è¦æˆ‘ä»¬çš„é™ªä¼´ä¸æ”¯æŒ</span>
                                                <span class="replacement-word-item" onclick="applyReplacement('issue4', 'ä¸ºå­©å­çš„æœªæ¥ä¿é©¾æŠ¤èˆª')">ä¸ºå­©å­çš„æœªæ¥ä¿é©¾æŠ¤èˆª</span>
                                            </div>
                                        </div>
                                        <div class="manual-edit-section">
                                            <strong>äººå·¥ä¿®æ”¹:</strong>
                                            <input type="text" class="manual-edit-input" id="manual-replace-issue4" placeholder="æ‰‹åŠ¨è¾“å…¥æ›¿ä»£è¯">
                                            <textarea class="manual-edit-textarea" id="manual-note-issue4" placeholder="è¡¥å……å®¡æ ¸æ„è§ï¼ˆå¯é€‰ï¼‰"></textarea>
                                            <button class="add-rule-btn" onclick="saveManualEdit('issue4')">ä¿å­˜ä¿®æ”¹</button>
                                        </div>
                                        <span class="rule-tag tag-company">å…¬å¸è§„åˆ™</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å¯¹æ¯”æŸ¥çœ‹æ ‡ç­¾é¡µ -->
                    <div class="tab-content" id="review-comparison-tab">
                        <div class="comparison-view">
                            <div class="comparison-panel original">
                                <h4>åŸæ–‡å†…å®¹</h4>
                                <div id="comparison-original">å¤æ˜Ÿä¿å¾·ä¿¡å¤§é»„èœ‚16å·å°‘å„¿é‡ç–¾é™©(æ——èˆ°ç‰ˆ)<br><br>ã€æš–å¿ƒå®ˆæŠ¤,ç†èµ”è§è¯ã€‘<br><br>ä¸ºå­©å­é€‰æ‹©ä¸€ä»½ä¿éšœï¼Œå°±æ˜¯ä¸ºä»–ä»¬çš„æœªæ¥æŠ•èµ„ã€‚è¿™ä»½ä¿é™©ä¸ä»…æä¾›å®å®åœ¨åœ¨çš„é’±ï¼Œè¿˜èƒ½ç¡®ä¿å­©å­è·å¾—æœ€å¥½çš„åŒ»ç–—èµ„æºã€‚å­©å­çš„æˆé•¿ä¹‹è·¯å……æ»¡æœªçŸ¥ï¼Œä½†æˆ‘ä»¬å¯ä»¥æå‰åšå¥½å‡†å¤‡ã€‚</div>
                            </div>
                            <div class="comparison-panel modified">
                                <h4>ä¿®æ”¹åå†…å®¹</h4>
                                <div id="comparison-modified">å¤æ˜Ÿä¿å¾·ä¿¡å¤§é»„èœ‚16å·å°‘å„¿ä¿éšœè®¡åˆ’(æ——èˆ°ç‰ˆ)<br><br>ã€æš–å¿ƒå®ˆæŠ¤,ç†èµ”è§è¯ã€‘<br><br>ä¸ºå­©å­é€‰æ‹©ä¸€ä»½ä¿éšœï¼Œå°±æ˜¯ä¸ºä»–ä»¬çš„æœªæ¥æŠ•èµ„ã€‚è¿™ä»½ä¿éšœä¸ä»…æä¾›çœŸåˆ‡çš„ä¿éšœï¼Œè¿˜èƒ½ç¡®ä¿å­©å­è·å¾—ä¼˜è´¨çš„åŒ»ç–—èµ„æºã€‚å­©å­çš„æˆé•¿éœ€è¦æˆ‘ä»¬çš„é™ªä¼´ä¸æ”¯æŒï¼Œä½†æˆ‘ä»¬å¯ä»¥æå‰åšå¥½å‡†å¤‡ã€‚</div>
                            </div>
                        </div>
                    </div>

                    <!-- ä¿®æ”¹åå†…å®¹æ ‡ç­¾é¡µ -->
                    <div class="tab-content" id="review-modified-tab">
                        <div>
                            <h4 style="margin-bottom: 15px;">ä¿®æ”¹åå†…å®¹</h4>
                            <div class="original-content" id="modified-content-text" style="background: #f1f8e9; border: 2px solid #4caf50;">
                                å¤æ˜Ÿä¿å¾·ä¿¡å¤§é»„èœ‚16å·<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">å°‘å„¿ä¿éšœè®¡åˆ’</span>(æ——èˆ°ç‰ˆ)<br><br>
                                ã€æš–å¿ƒå®ˆæŠ¤,ç†èµ”è§è¯ã€‘<br><br>
                                ä¸ºå­©å­é€‰æ‹©ä¸€ä»½ä¿éšœï¼Œå°±æ˜¯ä¸ºä»–ä»¬çš„æœªæ¥æŠ•èµ„ã€‚è¿™ä»½ä¿éšœä¸ä»…æä¾›<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">çœŸåˆ‡çš„ä¿éšœ</span>ï¼Œè¿˜èƒ½ç¡®ä¿å­©å­è·å¾—<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">ä¼˜è´¨çš„åŒ»ç–—èµ„æº</span>ã€‚<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">å­©å­çš„æˆé•¿éœ€è¦æˆ‘ä»¬çš„é™ªä¼´ä¸æ”¯æŒ</span>ï¼Œä½†æˆ‘ä»¬å¯ä»¥æå‰åšå¥½å‡†å¤‡ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µé¢6: çŸ¥è¯†åº“ç»´æŠ¤ -->
    <div class="page" id="page6">
        <div class="admin-section">
            <div class="admin-container">
                <div class="admin-header">
                    <div>
                        <h2 style="margin: 0;">åˆè§„æ™ºèƒ½ä½“ç®¡ç†ç³»ç»Ÿ - çŸ¥è¯†åº“ç»´æŠ¤</h2>
                    </div>
                    <div style="display: flex; gap: 20px; align-items: center;">
                        <span>æ“ä½œæ‰‹å†Œ</span>
                        <span>å®‰** (15072817)</span>
                    </div>
                </div>
                <div style="margin-bottom: 20px; color: #666;">
                    <strong>çŸ¥è¯†åº“ç»´æŠ¤ä¸ä¸‰çº§å®¡æ ¸åˆ†ç±»</strong><br>
                    <span style="font-size: 14px;">ç®¡ç†åˆè§„çŸ¥è¯†åº“ï¼Œæ”¯æŒä¸‰çº§åˆ†ç±»ï¼šä¸€çº§åˆ†ç±»ï¼ˆæ³•å¾‹/å¹³å°/å…¬å¸/ä¸šåŠ¡ï¼‰â†’ äºŒçº§åˆ†ç±»ï¼ˆå…·ä½“è§„åˆ™ç±»å‹ï¼‰â†’ ä¸‰çº§åˆ†ç±»ï¼ˆå…·ä½“è§„åˆ™æ¡ç›®ï¼‰</span>
                </div>
                <div class="admin-content">
                    <div class="admin-sidebar">
                        <div style="margin-bottom: 20px; font-size: 12px; color: rgba(255,255,255,0.7);">MAIN NAVIGATION</div>
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <span>ğŸ </span>
                                <span>åˆè§„æ™ºèƒ½ä½“</span>
                                <span>â–¼</span>
                            </div>
                            <div style="padding-left: 30px;">
                                <div class="menu-item" onclick="navigateToPage(3)">å‘èµ·å®¡æ ¸</div>
                                <div class="menu-item" onclick="navigateToPage(4)">å®¡æ ¸ä»»åŠ¡æ˜ç»†</div>
                                <div class="menu-item active" onclick="navigateToPage(6)">çŸ¥è¯†åº“ç»´æŠ¤</div>
                            </div>
                        </div>
                    </div>
                    <div class="admin-main">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0;">çŸ¥è¯†åº“åˆ†ç±»ç®¡ç†</h3>
                            <button class="submit-btn" onclick="addNewCategory()">+ æ–°å¢åˆ†ç±»</button>
                        </div>

                        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                        <div class="knowledge-stats">
                            <div class="stat-card">
                                <div class="stat-value" id="stat-total">0</div>
                                <div class="stat-label">æ€»è§„åˆ™æ•°</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-level1">5</div>
                                <div class="stat-label">ä¸€çº§åˆ†ç±»</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-level2">8</div>
                                <div class="stat-label">äºŒçº§åˆ†ç±»</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-level3">12</div>
                                <div class="stat-label">ä¸‰çº§è§„åˆ™</div>
                            </div>
                        </div>

                        <!-- æœç´¢æ¡† -->
                        <div class="knowledge-search">
                            <div class="search-input-group">
                                <input type="text" class="search-input" id="knowledge-search-input" placeholder="æœç´¢è§„åˆ™åç§°ã€å…³é”®è¯ã€è§„åˆ™å†…å®¹..." onkeyup="searchKnowledge(event)">
                                <button class="search-btn" onclick="performSearch()">ğŸ” æœç´¢</button>
                                <button class="search-btn" onclick="clearSearch()" style="background: #999;">æ¸…é™¤</button>
                            </div>
                            <div class="search-results" id="search-results" style="display: none;">
                                <div style="font-weight: 600; margin-bottom: 10px; color: #666;">æœç´¢ç»“æœï¼š</div>
                                <div id="search-results-list"></div>
                            </div>
                        </div>

                        <div class="knowledge-tree" id="knowledge-tree">
                            <!-- ä¸€çº§åˆ†ç±»ï¼šå›½å®¶æ³•å¾‹ -->
                            <div class="tree-node tree-node-level1" data-category-id="legal">
                                <span class="tree-toggle" onclick="toggleTree(this)">å›½å®¶æ³•å¾‹</span>
                                <button class="add-rule-btn" onclick="addRule('legal')">+ æ·»åŠ è§„åˆ™</button>
                                <div class="tree-children">
                                    <!-- äºŒçº§åˆ†ç±» -->
                                    <div class="tree-node tree-node-level2" data-category-id="legal-ad">
                                        <span class="tree-toggle" onclick="toggleTree(this)">å¹¿å‘Šæ³•</span>
                                        <button class="add-rule-btn" onclick="addRule('legal-ad')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('legal-ad')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <!-- ä¸‰çº§åˆ†ç±» -->
                                            <div class="tree-node tree-node-level3" data-rule-id="legal-ad-1">
                                                <span>ç»å¯¹åŒ–ç”¨è¯­ç¦æ­¢</span>
                                                <button class="add-rule-btn" onclick="editRule('legal-ad-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('legal-ad-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                            <div class="tree-node tree-node-level3" data-rule-id="legal-ad-2">
                                                <span>æœªæˆå¹´äººä¿æŠ¤</span>
                                                <button class="add-rule-btn" onclick="editRule('legal-ad-2')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('legal-ad-2')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tree-node tree-node-level2" data-category-id="legal-medical">
                                        <span class="tree-toggle" onclick="toggleTree(this)">åŒ»ç–—å¹¿å‘Šç®¡ç†åŠæ³•</span>
                                        <button class="add-rule-btn" onclick="addRule('legal-medical')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('legal-medical')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <div class="tree-node tree-node-level3" data-rule-id="legal-medical-1">
                                                <span>åŒ»ç–—èµ„è´¨è¦æ±‚</span>
                                                <button class="add-rule-btn" onclick="editRule('legal-medical-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('legal-medical-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ä¸€çº§åˆ†ç±»ï¼šå¹³å°è§„åˆ™ -->
                            <div class="tree-node tree-node-level1" data-category-id="platform">
                                <span class="tree-toggle" onclick="toggleTree(this)">å¹³å°è§„åˆ™</span>
                                <button class="add-rule-btn" onclick="addRule('platform')">+ æ·»åŠ è§„åˆ™</button>
                                <div class="tree-children">
                                    <div class="tree-node tree-node-level2" data-category-id="platform-xhs">
                                        <span class="tree-toggle" onclick="toggleTree(this)">å°çº¢ä¹¦</span>
                                        <button class="add-rule-btn" onclick="addRule('platform-xhs')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('platform-xhs')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <div class="tree-node tree-node-level3" data-rule-id="platform-xhs-1">
                                                <span>ç¤¾åŒºè§„èŒƒ - ç‚«å¯Œå†…å®¹</span>
                                                <button class="add-rule-btn" onclick="editRule('platform-xhs-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('platform-xhs-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tree-node tree-node-level2" data-category-id="platform-dy">
                                        <span class="tree-toggle" onclick="toggleTree(this)">æŠ–éŸ³</span>
                                        <button class="add-rule-btn" onclick="addRule('platform-dy')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('platform-dy')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <div class="tree-node tree-node-level3" data-rule-id="platform-dy-1">
                                                <span>å†…å®¹å®¡æ ¸è§„èŒƒ</span>
                                                <button class="add-rule-btn" onclick="editRule('platform-dy-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('platform-dy-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ä¸€çº§åˆ†ç±»ï¼šå…¬å¸è§„åˆ™ -->
                            <div class="tree-node tree-node-level1" data-category-id="company">
                                <span class="tree-toggle" onclick="toggleTree(this)">å…¬å¸è§„åˆ™</span>
                                <button class="add-rule-btn" onclick="addRule('company')">+ æ·»åŠ è§„åˆ™</button>
                                <div class="tree-children">
                                    <div class="tree-node tree-node-level2" data-category-id="company-content">
                                        <span class="tree-toggle" onclick="toggleTree(this)">å†…å®¹å®¡æ ¸è§„èŒƒ</span>
                                        <button class="add-rule-btn" onclick="addRule('company-content')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('company-content')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <div class="tree-node tree-node-level3" data-rule-id="company-content-1">
                                                <span>é¿å…ç„¦è™‘è¡¨è¿°</span>
                                                <button class="add-rule-btn" onclick="editRule('company-content-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('company-content-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ä¸€çº§åˆ†ç±»ï¼šä¸šåŠ¡è§„åˆ™ -->
                            <div class="tree-node tree-node-level1" data-category-id="business">
                                <span class="tree-toggle" onclick="toggleTree(this)">ä¸šåŠ¡è§„åˆ™</span>
                                <button class="add-rule-btn" onclick="addRule('business')">+ æ·»åŠ è§„åˆ™</button>
                                <div class="tree-children">
                                    <div class="tree-node tree-node-level2" data-category-id="business-ad">
                                        <span class="tree-toggle" onclick="toggleTree(this)">å¹¿å‘Šç”¨è¯­è§„èŒƒ</span>
                                        <button class="add-rule-btn" onclick="addRule('business-ad')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('business-ad')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <div class="tree-node tree-node-level3" data-rule-id="business-ad-1">
                                                <span>ç»å¯¹åŒ–ç”¨è¯­ç¦æ­¢</span>
                                                <button class="add-rule-btn" onclick="editRule('business-ad-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('business-ad-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ä¸€çº§åˆ†ç±»ï¼šèµ„è´¨å®¡æ ¸ï¼ˆä¼˜å…ˆï¼‰ -->
                            <div class="tree-node tree-node-level1" style="border-left: 4px solid #f44336;" data-category-id="qualification">
                                <span class="tree-toggle" onclick="toggleTree(this)">èµ„è´¨å®¡æ ¸ <span class="qualification-badge">ä¼˜å…ˆ</span></span>
                                <button class="add-rule-btn" onclick="addRule('qualification')">+ æ·»åŠ è§„åˆ™</button>
                                <div class="tree-children">
                                    <div class="tree-node tree-node-level2" data-category-id="qualification-company">
                                        <span class="tree-toggle" onclick="toggleTree(this)">å…¬å¸èµ„è´¨é™åˆ¶</span>
                                        <button class="add-rule-btn" onclick="addRule('qualification-company')">+ æ·»åŠ è§„åˆ™</button>
                                        <button class="add-rule-btn" onclick="viewRulesByCategory('qualification-company')" style="background: #4caf50;">æŸ¥çœ‹è§„åˆ™</button>
                                        <div class="tree-children">
                                            <div class="tree-node tree-node-level3" data-rule-id="qualification-company-1">
                                                <span>æ— åŒ»ç–—/ä¿é™©/é‡‘èèµ„è´¨ - ç¦æ­¢æåŠç›¸å…³å†…å®¹</span>
                                                <button class="add-rule-btn" onclick="editRule('qualification-company-1')">ç¼–è¾‘</button>
                                                <button class="add-rule-btn" onclick="viewRuleDetail('qualification-company-1')" style="background: #4caf50;">æŸ¥çœ‹</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ è§„åˆ™å¼¹çª— -->
    <div class="rule-modal" id="rule-modal">
        <div class="rule-modal-content">
            <div class="rule-modal-header">
                <h3 id="modal-title">æ·»åŠ è§„åˆ™</h3>
                <button class="close-modal" onclick="closeRuleModal()">Ã—</button>
            </div>
            <form id="rule-form" onsubmit="saveRule(event)">
                <div class="form-group">
                    <label>è§„åˆ™åç§° *</label>
                    <input type="text" id="rule-name" required placeholder="è¯·è¾“å…¥è§„åˆ™åç§°">
                </div>
                <div class="form-group">
                    <label>è§„åˆ™ç±»å‹ *</label>
                    <select id="rule-type" required>
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="legal">å›½å®¶æ³•å¾‹</option>
                        <option value="platform">å¹³å°è§„åˆ™</option>
                        <option value="company">å…¬å¸è§„åˆ™</option>
                        <option value="business">ä¸šåŠ¡è§„åˆ™</option>
                        <option value="qualification">èµ„è´¨å®¡æ ¸</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>è§„åˆ™æè¿° *</label>
                    <textarea id="rule-description" required placeholder="è¯·è¾“å…¥è§„åˆ™æè¿°å’Œå…·ä½“è¦æ±‚"></textarea>
                </div>
                <div class="form-group">
                    <label>è¿è§„å…³é”®è¯ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</label>
                    <textarea id="rule-keywords" placeholder="ä¾‹å¦‚ï¼š&#10;æœ€å¥½&#10;æœ€é«˜çº§&#10;ç»å¯¹"></textarea>
                </div>
                <div class="form-group">
                    <label>æ›¿æ¢è¯å»ºè®®ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</label>
                    <textarea id="rule-replacements" placeholder="ä¾‹å¦‚ï¼š&#10;ä¼˜è´¨&#10;è¾ƒå¥½&#10;ç›¸å¯¹"></textarea>
                </div>
                <div class="form-group">
                    <label>ä¼˜å…ˆçº§</label>
                    <select id="rule-priority">
                        <option value="normal">æ™®é€š</option>
                        <option value="high">é«˜ï¼ˆä¼˜å…ˆå®¡æ ¸ï¼‰</option>
                        <option value="critical">ç´§æ€¥ï¼ˆèµ„è´¨ç›¸å…³ï¼‰</option>
                    </select>
                </div>
                <input type="hidden" id="rule-parent-id">
                <input type="hidden" id="rule-level">
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeRuleModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn-save">ä¿å­˜è§„åˆ™</button>
                </div>
            </form>
        </div>
    </div>

    <!-- è§„åˆ™è¯¦æƒ…å¼¹çª— -->
    <div class="rule-modal" id="rule-detail-modal">
        <div class="rule-modal-content" style="max-width: 800px;">
            <div class="rule-modal-header">
                <h3 id="detail-modal-title">è§„åˆ™è¯¦æƒ…</h3>
                <button class="close-modal" onclick="closeDetailModal()">Ã—</button>
            </div>
            <div id="rule-detail-content"></div>
            <div class="form-actions">
                <button type="button" class="btn-cancel" onclick="closeDetailModal()">å…³é—­</button>
                <button type="button" class="btn-save" onclick="editRuleFromDetail()">ç¼–è¾‘è§„åˆ™</button>
            </div>
        </div>
    </div>

    <!-- åˆ†é¡µæ§åˆ¶ -->
    <div class="pagination">
        <button onclick="previousPage()">â€¹</button>
        <span class="page-info"><span id="current-page">1</span> / 6</span>
        <button onclick="nextPage()">â€º</button>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 6;
        
        // å­˜å‚¨å®¡æ ¸å»ºè®®æ•°æ®
        const auditSuggestions = {
            issue1: {
                original: 'å°‘å„¿é‡ç–¾é™©',
                replacements: ['å°‘å„¿ä¿éšœè®¡åˆ’', 'å°‘å„¿å¥åº·ä¿éšœ', 'ä¿éšœæ–¹æ¡ˆ'],
                rule: 'èµ„è´¨å®¡æ ¸ï¼šæ— ç›¸å…³èµ„è´¨',
                type: 'qualification',
                priority: 1
            },
            issue2: {
                original: 'å®å®åœ¨åœ¨çš„é’±',
                replacements: ['çœŸåˆ‡çš„ä¿éšœ', 'å®é™…ä¿éšœ', 'ä¿éšœæ”¯æŒ'],
                rule: 'ä¸ç¬¦åˆç¤¾åŒºè§„èŒƒ',
                type: 'platform',
                priority: 2
            },
            issue3: {
                original: 'æœ€å¥½çš„åŒ»ç–—èµ„æº',
                replacements: ['ä¼˜è´¨çš„åŒ»ç–—èµ„æº', 'ä¸“ä¸šåŒ»ç–—èµ„æº', 'å¯é åŒ»ç–—æ”¯æŒ'],
                rule: 'ä¸ç¬¦åˆä¸šåŠ¡è¦æ±‚',
                type: 'business',
                priority: 3
            },
            issue4: {
                original: 'å­©å­çš„æˆé•¿ä¹‹è·¯å……æ»¡æœªçŸ¥',
                replacements: ['å­©å­çš„æˆé•¿éœ€è¦æˆ‘ä»¬çš„é™ªä¼´ä¸æ”¯æŒ', 'ä¸ºå­©å­çš„æœªæ¥ä¿é©¾æŠ¤èˆª'],
                rule: 'ä¸ç¬¦åˆå…¬å¸è§„èŒƒ',
                type: 'company',
                priority: 4
            }
        };
        
        // å­˜å‚¨ä¿®æ”¹åçš„å†…å®¹
        let modifiedContent = '';

        function showPage(pageNum) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºå½“å‰é¡µé¢
            document.getElementById(`page${pageNum}`).classList.add('active');
            
            // æ›´æ–°åˆ†é¡µä¿¡æ¯
            document.getElementById('current-page').textContent = pageNum;
            
            // æ›´æ–°èœå•æ¿€æ´»çŠ¶æ€
            updateMenuActiveState(pageNum);
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                showPage(currentPage);
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                showPage(currentPage);
            }
        }

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(tabType, element) {
            // æ›´æ–°æ ‡ç­¾æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            element.classList.add('active');
            
            // åˆ‡æ¢å†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (tabType === 'single') {
                document.getElementById('single-tab').classList.add('active');
            } else {
                document.getElementById('batch-tab').classList.add('active');
            }
        }

        // æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('file-input');
        const fileInfo = document.getElementById('file-info');
        const fileName = document.getElementById('file-name');

        // æ‹–æ‹½ä¸Šä¼ 
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            fileName.textContent = `å·²é€‰æ‹©: ${file.name} (${(file.size / 1024).toFixed(2)} KB)`;
            fileInfo.style.display = 'block';
        }

        function removeFile() {
            fileInput.value = '';
            fileInfo.style.display = 'none';
        }

        // ä¸‹è½½æ¨¡æ¿
        function downloadTemplate() {
            // åˆ›å»ºä¸€ä¸ªç¤ºä¾‹Excelæ¨¡æ¿çš„CSVæ ¼å¼
            const csvContent = "æ–‡æœ¬å†…å®¹,å‘å¸ƒå¹³å°\nç¤ºä¾‹æ–‡æœ¬1,å°çº¢ä¹¦\nç¤ºä¾‹æ–‡æœ¬2,æŠ–éŸ³";
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'å®¡æ ¸æ¨¡æ¿.csv';
            link.click();
            alert('æ¨¡æ¿ä¸‹è½½æˆåŠŸï¼');
        }

        // æäº¤å®¡æ ¸
        function submitReview() {
            const activeTab = document.querySelector('.tab-content.active').id;
            
            if (activeTab === 'single-tab') {
                const content = document.getElementById('single-input').value.trim();
                if (!content) {
                    alert('è¯·è¾“å…¥éœ€è¦å®¡æ ¸çš„å†…å®¹ï¼');
                    return;
                }
            } else {
                if (!fileInput.files.length) {
                    alert('è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼');
                    return;
                }
            }

            // æ£€æŸ¥å¹³å°é€‰æ‹©
            const platforms = document.querySelectorAll('input[type="checkbox"]:checked');
            if (platforms.length === 0) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªå‘å¸ƒå¹³å°ï¼');
                return;
            }

            // æ¨¡æ‹Ÿæäº¤
            alert('æäº¤æˆåŠŸï¼ä»»åŠ¡å·²åˆ›å»ºï¼Œè¯·å‰å¾€"å®¡æ ¸ä»»åŠ¡æ˜ç»†"æŸ¥çœ‹ã€‚');
            
            // å¯ä»¥è·³è½¬åˆ°ä»»åŠ¡æ˜ç»†é¡µé¢
            setTimeout(() => {
                navigateToPage(4);
            }, 1000);
        }

        // å…¨é€‰åŠŸèƒ½
        document.getElementById('select-all')?.addEventListener('change', function(e) {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:not(#select-all)');
            checkboxes.forEach(cb => {
                cb.checked = e.target.checked;
            });
        });

        // æŸ¥çœ‹è¯¦æƒ…
        function viewDetail(taskId) {
            // è·³è½¬åˆ°å®¡æ ¸ç»“æœè¯¦æƒ…é¡µé¢
            navigateToPage(5);
        }

        // åˆ é™¤ä»»åŠ¡
        function deleteTask(taskId) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤ä»»åŠ¡ ${taskId} å—ï¼Ÿ`)) {
                alert(`ä»»åŠ¡ ${taskId} å·²åˆ é™¤`);
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„åˆ é™¤é€»è¾‘
                const row = event.target.closest('tr');
                if (row) {
                    row.style.opacity = '0';
                    setTimeout(() => {
                        row.remove();
                    }, 300);
                }
            }
        }

        // æŸ¥è¯¢ä»»åŠ¡
        function searchTasks() {
            const text = document.getElementById('search-text').value;
            const status = document.getElementById('status-filter').value;
            const platform = document.getElementById('platform-filter').value;
            
            alert(`æŸ¥è¯¢æ¡ä»¶ï¼š\næ–‡æœ¬å†…å®¹: ${text || 'å…¨éƒ¨'}\nå®¡æ ¸çŠ¶æ€: ${status}\nå‘å¸ƒå¹³å°: ${platform}\n\næ­£åœ¨æŸ¥è¯¢...`);
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æŸ¥è¯¢é€»è¾‘
        }

        // æ–°å¢ä»»åŠ¡
        function addNewTask() {
            // è·³è½¬åˆ°å‘èµ·å®¡æ ¸é¡µé¢
            navigateToPage(3);
            // åˆ‡æ¢åˆ°å•æ¡å½•å…¥æ ‡ç­¾
            setTimeout(() => {
                switchTab('single', document.querySelector('.tab'));
            }, 100);
        }

        // è¿”å›åˆ—è¡¨
        function backToList() {
            navigateToPage(4);
        }

        // å¯¼èˆªåˆ°æŒ‡å®šé¡µé¢
        function navigateToPage(pageNum) {
            currentPage = pageNum;
            showPage(pageNum);
            updateMenuActiveState(pageNum);
        }

        // æ›´æ–°èœå•æ¿€æ´»çŠ¶æ€
        function updateMenuActiveState(pageNum) {
            // åªåœ¨é¡µé¢3å’Œé¡µé¢4ä¸­æ›´æ–°èœå•çŠ¶æ€
            if (pageNum === 3 || pageNum === 4) {
                // è·å–å½“å‰é¡µé¢çš„æ‰€æœ‰èœå•é¡¹
                const currentPage = document.getElementById(`page${pageNum}`);
                if (currentPage) {
                    const menuItems = currentPage.querySelectorAll('.menu-item');
                    menuItems.forEach(item => {
                        item.classList.remove('active');
                    });

                    // æ ¹æ®é¡µé¢è®¾ç½®å¯¹åº”çš„èœå•é¡¹ä¸ºæ¿€æ´»çŠ¶æ€
                    if (pageNum === 3 && menuItems.length >= 2) {
                        // å‘èµ·å®¡æ ¸é¡µé¢ - ç¬¬ä¸€ä¸ªèœå•é¡¹æ¿€æ´»
                        menuItems[0].classList.add('active');
                    } else if (pageNum === 4 && menuItems.length >= 2) {
                        // å®¡æ ¸ä»»åŠ¡æ˜ç»†é¡µé¢ - ç¬¬äºŒä¸ªèœå•é¡¹æ¿€æ´»
                        menuItems[1].classList.add('active');
                    }
                }
            }
        }

        // é”®ç›˜å¯¼èˆª
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                previousPage();
            } else if (e.key === 'ArrowRight') {
                nextPage();
            }
        });

        // æ˜¾ç¤ºå®¡æ ¸å»ºè®®å¼¹çª—
        function showSuggestionPopup(event, issueId) {
            // ç§»é™¤æ‰€æœ‰å·²å­˜åœ¨çš„å¼¹çª—
            document.querySelectorAll('.suggestion-popup').forEach(popup => popup.remove());
            
            const suggestion = auditSuggestions[issueId];
            if (!suggestion) return;
            
            const popup = document.createElement('div');
            popup.className = 'suggestion-popup active';
            popup.innerHTML = `
                <div class="popup-title">${suggestion.rule}</div>
                <div style="font-size: 13px; color: #666; margin-bottom: 10px;">åŸè¯ï¼š${suggestion.original}</div>
                <div class="replacement-words">
                    <strong>æ›¿æ¢è¯å»ºè®®ï¼š</strong><br>
                    ${suggestion.replacements.map(r => `<span class="replacement-word-item" onclick="applyReplacement('${issueId}', '${r}'); this.closest('.suggestion-popup').remove();">${r}</span>`).join('')}
                </div>
            `;
            
            const rect = event.target.getBoundingClientRect();
            popup.style.position = 'fixed';
            popup.style.top = (rect.bottom + 10) + 'px';
            popup.style.left = rect.left + 'px';
            
            document.body.appendChild(popup);
            
            // ç‚¹å‡»å¤–éƒ¨å…³é—­
            setTimeout(() => {
                document.addEventListener('click', function closePopup(e) {
                    if (!popup.contains(e.target) && e.target !== event.target) {
                        popup.remove();
                        document.removeEventListener('click', closePopup);
                    }
                });
            }, 100);
        }
        
        // åº”ç”¨æ›¿æ¢è¯
        function applyReplacement(issueId, replacement) {
            const suggestion = auditSuggestions[issueId];
            if (!suggestion) return;
            
            // æ›´æ–°åŸæ–‡å†…å®¹
            const originalText = document.getElementById('original-content-text').innerHTML;
            const updatedText = originalText.replace(
                new RegExp(suggestion.original.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'),
                `<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">${replacement}</span>`
            );
            document.getElementById('original-content-text').innerHTML = updatedText;
            
            // æ›´æ–°ä¿®æ”¹åå†…å®¹
            updateModifiedContent();
            
            // æ›´æ–°å¯¹æ¯”è§†å›¾
            updateComparisonView();
            
            // æ ‡è®°ä¸ºå·²ä¿®æ”¹
            const suggestionItem = document.querySelector(`.suggestion-item[data-id="${issueId}"]`);
            if (suggestionItem) {
                suggestionItem.style.opacity = '0.6';
            }
        }
        
        // ä¸€é”®å…¨éƒ¨ä¿®æ”¹
        function applyAllSuggestions() {
            if (confirm('ç¡®å®šè¦åº”ç”¨æ‰€æœ‰å®¡æ ¸å»ºè®®å—ï¼Ÿ')) {
                Object.keys(auditSuggestions).forEach(issueId => {
                    const suggestion = auditSuggestions[issueId];
                    if (suggestion.replacements && suggestion.replacements.length > 0) {
                        applyReplacement(issueId, suggestion.replacements[0]);
                    }
                });
                alert('æ‰€æœ‰å»ºè®®å·²åº”ç”¨ï¼');
                // åˆ‡æ¢åˆ°ä¿®æ”¹åå†…å®¹æ ‡ç­¾é¡µ
                switchReviewTab('modified', document.querySelector('.tab[onclick*="modified"]'));
            }
        }
        
        // æ›´æ–°ä¿®æ”¹åå†…å®¹
        function updateModifiedContent() {
            let content = document.getElementById('original-content-text').textContent || document.getElementById('original-content-text').innerText;
            
            // åº”ç”¨æ‰€æœ‰æ›¿æ¢
            Object.keys(auditSuggestions).forEach(issueId => {
                const suggestion = auditSuggestions[issueId];
                // è¿™é‡Œåº”è¯¥ä»å®é™…ä¿®æ”¹çŠ¶æ€è·å–ï¼Œç®€åŒ–å¤„ç†
            });
            
            modifiedContent = content;
            document.getElementById('modified-content-text').innerHTML = content.replace(
                /å°‘å„¿é‡ç–¾é™©/g, '<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">å°‘å„¿ä¿éšœè®¡åˆ’</span>'
            ).replace(
                /å®å®åœ¨åœ¨çš„é’±/g, '<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">çœŸåˆ‡çš„ä¿éšœ</span>'
            ).replace(
                /æœ€å¥½çš„åŒ»ç–—èµ„æº/g, '<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">ä¼˜è´¨çš„åŒ»ç–—èµ„æº</span>'
            ).replace(
                /å­©å­çš„æˆé•¿ä¹‹è·¯å……æ»¡æœªçŸ¥/g, '<span style="background: #c8e6c9; color: #2e7d32; padding: 2px 4px; border-radius: 4px;">å­©å­çš„æˆé•¿éœ€è¦æˆ‘ä»¬çš„é™ªä¼´ä¸æ”¯æŒ</span>'
            );
        }
        
        // æ›´æ–°å¯¹æ¯”è§†å›¾
        function updateComparisonView() {
            const original = document.getElementById('original-content-text').textContent || document.getElementById('original-content-text').innerText;
            const modified = document.getElementById('modified-content-text').textContent || document.getElementById('modified-content-text').innerText;
            
            document.getElementById('comparison-original').textContent = original;
            document.getElementById('comparison-modified').textContent = modified;
        }
        
        // å®¡æ ¸ç»“æœæ ‡ç­¾é¡µåˆ‡æ¢
        function switchReviewTab(tabType, element) {
            document.querySelectorAll('#page5 .tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('#page5 .tab-content').forEach(content => content.classList.remove('active'));
            
            element.classList.add('active');
            
            if (tabType === 'original') {
                document.getElementById('review-original-tab').classList.add('active');
            } else if (tabType === 'comparison') {
                document.getElementById('review-comparison-tab').classList.add('active');
                updateComparisonView();
            } else if (tabType === 'modified') {
                document.getElementById('review-modified-tab').classList.add('active');
                updateModifiedContent();
            }
        }
        
        // ä¿å­˜äººå·¥ä¿®æ”¹
        function saveManualEdit(issueId) {
            const replaceInput = document.getElementById(`manual-replace-${issueId}`);
            const noteInput = document.getElementById(`manual-note-${issueId}`);
            
            if (replaceInput && replaceInput.value.trim()) {
                applyReplacement(issueId, replaceInput.value.trim());
                if (noteInput && noteInput.value.trim()) {
                    // ä¿å­˜è¡¥å……æ„è§
                    console.log(`Issue ${issueId} manual note:`, noteInput.value);
                }
                alert('ä¿®æ”¹å·²ä¿å­˜ï¼');
            } else {
                alert('è¯·è¾“å…¥æ›¿ä»£è¯');
            }
        }
        
        // å¤åˆ¶ä¿®æ”¹åå†…å®¹
        function copyModifiedContent() {
            const modifiedText = document.getElementById('modified-content-text').textContent || document.getElementById('modified-content-text').innerText;
            navigator.clipboard.writeText(modifiedText).then(() => {
                alert('å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(() => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶');
            });
        }
        
        // å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š
        function exportContent() {
            const original = document.getElementById('original-content-text').textContent || document.getElementById('original-content-text').innerText;
            const modified = document.getElementById('modified-content-text').textContent || document.getElementById('modified-content-text').innerText;
            
            const report = `åˆè§„å®¡æ ¸å¯¹æ¯”æŠ¥å‘Š\n\n` +
                `åŸæ–‡å†…å®¹ï¼š\n${original}\n\n` +
                `ä¿®æ”¹åå†…å®¹ï¼š\n${modified}\n\n` +
                `å®¡æ ¸æ—¶é—´ï¼š${new Date().toLocaleString()}\n` +
                `å®¡æ ¸å»ºè®®ï¼š\n${Object.values(auditSuggestions).map(s => `- ${s.rule}: ${s.replacements[0]}`).join('\n')}`;
            
            const blob = new Blob(['\ufeff' + report], { type: 'text/plain;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `åˆè§„å®¡æ ¸æŠ¥å‘Š_${new Date().getTime()}.txt`;
            link.click();
        }
        
        // çŸ¥è¯†åº“æ•°æ®å­˜å‚¨
        let knowledgeBase = {
            rules: [
                { id: 'legal-ad-1', name: 'ç»å¯¹åŒ–ç”¨è¯­ç¦æ­¢', level: 3, parent: 'legal-ad', type: 'legal', description: 'å¹¿å‘Šä¸­ä¸¥ç¦ä½¿ç”¨"æœ€é«˜çº§"ã€"æœ€ä½³"ã€"æœ€å¥½"ç­‰ç»å¯¹åŒ–ç”¨è¯­ã€‚', keywords: ['æœ€å¥½', 'æœ€é«˜çº§', 'æœ€ä½³', 'ç»å¯¹'], replacements: ['ä¼˜è´¨', 'è¾ƒå¥½', 'ç›¸å¯¹'], priority: 'high' },
                { id: 'legal-ad-2', name: 'æœªæˆå¹´äººä¿æŠ¤', level: 3, parent: 'legal-ad', type: 'legal', description: 'ä¸å¾—åˆ©ç”¨ä¸æ»¡åå‘¨å²çš„æœªæˆå¹´äººä½œä¸ºå¹¿å‘Šä»£è¨€äººã€‚', keywords: ['å°‘å„¿', 'å„¿ç«¥'], replacements: ['ä¿éšœè®¡åˆ’', 'å¥åº·ä¿éšœ'], priority: 'high' },
                { id: 'legal-medical-1', name: 'åŒ»ç–—èµ„è´¨è¦æ±‚', level: 3, parent: 'legal-medical', type: 'legal', description: 'å‘å¸ƒåŒ»ç–—ç›¸å…³å†…å®¹éœ€è¦ç›¸å…³åŒ»ç–—èµ„è´¨ã€‚', keywords: ['åŒ»ç–—', 'æ²»ç–—', 'è¯Šæ–­'], replacements: ['å¥åº·', 'ä¿å¥'], priority: 'critical' },
                { id: 'platform-xhs-1', name: 'ç¤¾åŒºè§„èŒƒ - ç‚«å¯Œå†…å®¹', level: 3, parent: 'platform-xhs', type: 'platform', description: 'ä¸¥ç¦ä½¿ç”¨ç‚«å¯Œã€è¿‡äºç›´æ¥çš„é‡‘é’±è¯±å¯¼ç±»è¯æ±‡ã€‚', keywords: ['å®å®åœ¨åœ¨çš„é’±', 'ç°é‡‘', 'èµšé’±'], replacements: ['çœŸåˆ‡çš„ä¿éšœ', 'å®é™…ä¿éšœ'], priority: 'normal' },
                { id: 'platform-dy-1', name: 'å†…å®¹å®¡æ ¸è§„èŒƒ', level: 3, parent: 'platform-dy', type: 'platform', description: 'æŠ–éŸ³å¹³å°å†…å®¹å®¡æ ¸è¦æ±‚ã€‚', keywords: [], replacements: [], priority: 'normal' },
                { id: 'company-content-1', name: 'é¿å…ç„¦è™‘è¡¨è¿°', level: 3, parent: 'company-content', type: 'company', description: 'é¿å…ä½¿ç”¨å¯èƒ½å¼•èµ·ç„¦è™‘çš„è¡¨è¿°ã€‚', keywords: ['å……æ»¡æœªçŸ¥', 'å±é™©', 'é£é™©'], replacements: ['éœ€è¦é™ªä¼´', 'ä¿é©¾æŠ¤èˆª'], priority: 'normal' },
                { id: 'business-ad-1', name: 'ç»å¯¹åŒ–ç”¨è¯­ç¦æ­¢', level: 3, parent: 'business-ad', type: 'business', description: 'ä¸šåŠ¡è§„åˆ™ï¼šç¦æ­¢ä½¿ç”¨ç»å¯¹åŒ–ç”¨è¯­ã€‚', keywords: ['æœ€å¥½', 'æœ€é«˜çº§'], replacements: ['ä¼˜è´¨', 'è¾ƒå¥½'], priority: 'normal' },
                { id: 'qualification-company-1', name: 'æ— åŒ»ç–—/ä¿é™©/é‡‘èèµ„è´¨ - ç¦æ­¢æåŠç›¸å…³å†…å®¹', level: 3, parent: 'qualification-company', type: 'qualification', description: 'æˆ‘å…¬å¸æ— åŒ»ç–—ã€ä¿é™©ã€é‡‘èç›¸å…³èµ„è´¨/ç‰Œç…§ï¼Œå› æ­¤ä¸èƒ½æåŠç›¸å…³å†…å®¹ï¼Œéœ€è¦ç›´æ¥åˆ é™¤æˆ–æ›¿æ¢ã€‚', keywords: ['åŒ»ç–—', 'ä¿é™©', 'é‡‘è', 'é‡ç–¾é™©', 'ç†è´¢'], replacements: ['å¥åº·ä¿éšœ', 'ä¿éšœè®¡åˆ’', 'æœåŠ¡'], priority: 'critical' }
            ],
            categories: {
                'legal': { name: 'å›½å®¶æ³•å¾‹', level: 1 },
                'legal-ad': { name: 'å¹¿å‘Šæ³•', level: 2, parent: 'legal' },
                'legal-medical': { name: 'åŒ»ç–—å¹¿å‘Šç®¡ç†åŠæ³•', level: 2, parent: 'legal' },
                'platform': { name: 'å¹³å°è§„åˆ™', level: 1 },
                'platform-xhs': { name: 'å°çº¢ä¹¦', level: 2, parent: 'platform' },
                'platform-dy': { name: 'æŠ–éŸ³', level: 2, parent: 'platform' },
                'company': { name: 'å…¬å¸è§„åˆ™', level: 1 },
                'company-content': { name: 'å†…å®¹å®¡æ ¸è§„èŒƒ', level: 2, parent: 'company' },
                'business': { name: 'ä¸šåŠ¡è§„åˆ™', level: 1 },
                'business-ad': { name: 'å¹¿å‘Šç”¨è¯­è§„èŒƒ', level: 2, parent: 'business' },
                'qualification': { name: 'èµ„è´¨å®¡æ ¸', level: 1 },
                'qualification-company': { name: 'å…¬å¸èµ„è´¨é™åˆ¶', level: 2, parent: 'qualification' }
            }
        };

        // çŸ¥è¯†åº“ç®¡ç†åŠŸèƒ½
        function toggleTree(element) {
            element.classList.toggle('expanded');
            const children = element.nextElementSibling;
            if (children && children.classList.contains('tree-children')) {
                children.classList.toggle('expanded');
            }
        }
        
        function addNewCategory() {
            const name = prompt('è¯·è¾“å…¥æ–°åˆ†ç±»åç§°ï¼š');
            if (name) {
                const id = 'category-' + Date.now();
                knowledgeBase.categories[id] = { name: name, level: 1 };
                updateKnowledgeTree();
                updateStats();
                alert(`åˆ†ç±»"${name}"å·²æ·»åŠ ï¼`);
            }
        }
        
        function addRule(categoryId) {
            document.getElementById('rule-modal').classList.add('active');
            document.getElementById('modal-title').textContent = 'æ·»åŠ è§„åˆ™';
            document.getElementById('rule-form').reset();
            document.getElementById('rule-parent-id').value = categoryId;
            
            // æ ¹æ®categoryIdç¡®å®šlevel
            const category = knowledgeBase.categories[categoryId];
            if (category) {
                document.getElementById('rule-level').value = category.level + 1;
                document.getElementById('rule-type').value = category.type || categoryId.split('-')[0];
            } else {
                document.getElementById('rule-level').value = '1';
            }
        }
        
        function editRule(ruleId) {
            const rule = knowledgeBase.rules.find(r => r.id === ruleId);
            if (!rule) {
                alert('è§„åˆ™ä¸å­˜åœ¨');
                return;
            }
            
            // æ˜¾ç¤ºè§„åˆ™è¯¦æƒ…
            showRuleDetail(rule);
        }
        
        function showRuleDetail(rule) {
            document.getElementById('rule-detail-modal').classList.add('active');
            document.getElementById('detail-modal-title').textContent = rule.name;
            
            const category = knowledgeBase.categories[rule.parent] || {};
            const parentCategory = rule.parent ? knowledgeBase.categories[rule.parent.split('-')[0]] : {};
            
            const detailContent = `
                <div class="rule-detail-card">
                    <div class="rule-detail-header">
                        <div>
                            <div class="rule-detail-title">${rule.name}</div>
                            <div class="rule-detail-meta">
                                ç±»å‹: ${getTypeName(rule.type)} | 
                                çº§åˆ«: ${getLevelName(rule.level)} | 
                                ä¼˜å…ˆçº§: ${getPriorityName(rule.priority)}
                            </div>
                        </div>
                    </div>
                    <div class="rule-detail-content">
                        <strong>è§„åˆ™æè¿°ï¼š</strong><br>
                        ${rule.description}
                    </div>
                    ${rule.keywords && rule.keywords.length > 0 ? `
                    <div style="margin-top: 15px;">
                        <strong>è¿è§„å…³é”®è¯ï¼š</strong>
                        <div class="rule-tags">
                            ${rule.keywords.map(k => `<span class="rule-tag-small">${k}</span>`).join('')}
                        </div>
                    </div>
                    ` : ''}
                    ${rule.replacements && rule.replacements.length > 0 ? `
                    <div style="margin-top: 15px;">
                        <strong>æ›¿æ¢è¯å»ºè®®ï¼š</strong>
                        <div class="rule-tags">
                            ${rule.replacements.map(r => `<span class="rule-tag-small" style="background: #e8f5e9; color: #2e7d32;">${r}</span>`).join('')}
                        </div>
                    </div>
                    ` : ''}
                </div>
            `;
            
            document.getElementById('rule-detail-content').innerHTML = detailContent;
            document.getElementById('rule-detail-modal').setAttribute('data-rule-id', rule.id);
        }
        
        function editRuleFromDetail() {
            const ruleId = document.getElementById('rule-detail-modal').getAttribute('data-rule-id');
            const rule = knowledgeBase.rules.find(r => r.id === ruleId);
            if (!rule) return;
            
            closeDetailModal();
            
            // å¡«å……è¡¨å•
            document.getElementById('rule-modal').classList.add('active');
            document.getElementById('modal-title').textContent = 'ç¼–è¾‘è§„åˆ™';
            document.getElementById('rule-name').value = rule.name;
            document.getElementById('rule-type').value = rule.type;
            document.getElementById('rule-description').value = rule.description;
            document.getElementById('rule-keywords').value = rule.keywords ? rule.keywords.join('\n') : '';
            document.getElementById('rule-replacements').value = rule.replacements ? rule.replacements.join('\n') : '';
            document.getElementById('rule-priority').value = rule.priority || 'normal';
            document.getElementById('rule-parent-id').value = rule.parent;
            document.getElementById('rule-level').value = rule.level;
            document.getElementById('rule-form').setAttribute('data-rule-id', ruleId);
        }
        
        function saveRule(event) {
            event.preventDefault();
            
            const ruleId = document.getElementById('rule-form').getAttribute('data-rule-id');
            const ruleName = document.getElementById('rule-name').value;
            const ruleType = document.getElementById('rule-type').value;
            const ruleDescription = document.getElementById('rule-description').value;
            const ruleKeywords = document.getElementById('rule-keywords').value.split('\n').filter(k => k.trim());
            const ruleReplacements = document.getElementById('rule-replacements').value.split('\n').filter(r => r.trim());
            const rulePriority = document.getElementById('rule-priority').value;
            const parentId = document.getElementById('rule-parent-id').value;
            const level = parseInt(document.getElementById('rule-level').value);
            
            const newRule = {
                id: ruleId || 'rule-' + Date.now(),
                name: ruleName,
                level: level,
                parent: parentId,
                type: ruleType,
                description: ruleDescription,
                keywords: ruleKeywords,
                replacements: ruleReplacements,
                priority: rulePriority
            };
            
            if (ruleId) {
                // æ›´æ–°ç°æœ‰è§„åˆ™
                const index = knowledgeBase.rules.findIndex(r => r.id === ruleId);
                if (index !== -1) {
                    knowledgeBase.rules[index] = newRule;
                }
            } else {
                // æ·»åŠ æ–°è§„åˆ™
                knowledgeBase.rules.push(newRule);
            }
            
            // æ›´æ–°æ ‘å½¢ç»“æ„
            updateKnowledgeTree();
            updateStats();
            
            // å¦‚æœæ˜¯æ–°è§„åˆ™ï¼Œå®æ—¶æ·»åŠ åˆ°æ ‘å½¢ç»“æ„
            if (!ruleId) {
                addRuleToTree(newRule);
            }
            
            closeRuleModal();
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            const message = ruleId ? 'è§„åˆ™å·²æ›´æ–°ï¼' : 'è§„åˆ™å·²æ·»åŠ ï¼é¡µé¢å·²è‡ªåŠ¨æ›´æ–°æ˜¾ç¤ºã€‚';
            alert(message);
        }
        
        function closeRuleModal() {
            document.getElementById('rule-modal').classList.remove('active');
            document.getElementById('rule-form').reset();
            document.getElementById('rule-form').removeAttribute('data-rule-id');
        }
        
        function closeDetailModal() {
            document.getElementById('rule-detail-modal').classList.remove('active');
        }
        
        // æœç´¢çŸ¥è¯†åº“
        function searchKnowledge(event) {
            if (event.key === 'Enter') {
                performSearch();
            } else if (event.target.value.trim() === '') {
                clearSearch();
            }
        }
        
        function performSearch() {
            const query = document.getElementById('knowledge-search-input').value.trim().toLowerCase();
            if (!query) {
                clearSearch();
                return;
            }
            
            const results = knowledgeBase.rules.filter(rule => {
                return rule.name.toLowerCase().includes(query) ||
                       rule.description.toLowerCase().includes(query) ||
                       (rule.keywords && rule.keywords.some(k => k.toLowerCase().includes(query))) ||
                       (rule.replacements && rule.replacements.some(r => r.toLowerCase().includes(query)));
            });
            
            displaySearchResults(results, query);
        }
        
        function displaySearchResults(results, query) {
            const resultsContainer = document.getElementById('search-results');
            const resultsList = document.getElementById('search-results-list');
            
            if (results.length === 0) {
                resultsList.innerHTML = '<div style="padding: 20px; text-align: center; color: #999;">æœªæ‰¾åˆ°åŒ¹é…çš„è§„åˆ™</div>';
            } else {
                resultsList.innerHTML = results.map((rule, index) => {
                    const category = knowledgeBase.categories[rule.parent] || {};
                    return `
                        <div class="search-result-item" onclick="showRuleDetailFromSearch('${rule.id}'); highlightSearchResult(this);">
                            <div style="font-weight: 600; color: #1976d2;">${highlightText(rule.name, query)}</div>
                            <div style="font-size: 12px; color: #999; margin-top: 5px;">
                                ${getTypeName(rule.type)} â†’ ${category.name || ''}
                            </div>
                            <div style="font-size: 13px; color: #666; margin-top: 5px;">
                                ${highlightText(rule.description.substring(0, 100), query)}${rule.description.length > 100 ? '...' : ''}
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            resultsContainer.style.display = 'block';
        }
        
        function highlightText(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<mark style="background: #ffeb3b; padding: 2px 4px;">$1</mark>');
        }
        
        function highlightSearchResult(element) {
            document.querySelectorAll('.search-result-item').forEach(item => {
                item.classList.remove('highlight');
            });
            element.classList.add('highlight');
        }
        
        function clearSearch() {
            document.getElementById('knowledge-search-input').value = '';
            document.getElementById('search-results').style.display = 'none';
            document.getElementById('search-results-list').innerHTML = '';
        }
        
        // æ›´æ–°çŸ¥è¯†åº“æ ‘å½¢ç»“æ„
        function updateKnowledgeTree() {
            // è¿™é‡Œå¯ä»¥é‡æ–°æ¸²æŸ“æ•´ä¸ªæ ‘å½¢ç»“æ„
            // ç®€åŒ–å¤„ç†ï¼šæ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats();
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const level1Count = Object.values(knowledgeBase.categories).filter(c => c.level === 1).length;
            const level2Count = Object.values(knowledgeBase.categories).filter(c => c.level === 2).length;
            const level3Count = knowledgeBase.rules.length;
            const totalCount = level3Count;
            
            document.getElementById('stat-total').textContent = totalCount;
            document.getElementById('stat-level1').textContent = level1Count;
            document.getElementById('stat-level2').textContent = level2Count;
            document.getElementById('stat-level3').textContent = level3Count;
        }
        
        // è¾…åŠ©å‡½æ•°
        function getTypeName(type) {
            const types = {
                'legal': 'å›½å®¶æ³•å¾‹',
                'platform': 'å¹³å°è§„åˆ™',
                'company': 'å…¬å¸è§„åˆ™',
                'business': 'ä¸šåŠ¡è§„åˆ™',
                'qualification': 'èµ„è´¨å®¡æ ¸'
            };
            return types[type] || type;
        }
        
        function getLevelName(level) {
            const levels = { 1: 'ä¸€çº§åˆ†ç±»', 2: 'äºŒçº§åˆ†ç±»', 3: 'ä¸‰çº§è§„åˆ™' };
            return levels[level] || `çº§åˆ«${level}`;
        }
        
        function getPriorityName(priority) {
            const priorities = {
                'normal': 'æ™®é€š',
                'high': 'é«˜',
                'critical': 'ç´§æ€¥'
            };
            return priorities[priority] || priority;
        }
        
        // ç‚¹å‡»æœç´¢ç»“æœæ—¶æ˜¾ç¤ºè¯¦æƒ…
        function showRuleDetailFromSearch(ruleId) {
            const rule = knowledgeBase.rules.find(r => r.id === ruleId);
            if (rule) {
                showRuleDetail(rule);
            }
        }
        
        // æ·»åŠ è§„åˆ™åå®æ—¶æ›´æ–°æ ‘å½¢ç»“æ„æ˜¾ç¤º
        function addRuleToTree(rule) {
            const parentNode = document.querySelector(`[data-category-id="${rule.parent}"]`);
            if (!parentNode) return;
            
            // ç¡®ä¿çˆ¶èŠ‚ç‚¹å±•å¼€
            const toggle = parentNode.querySelector('.tree-toggle');
            if (toggle && !toggle.classList.contains('expanded')) {
                toggle.click();
            }
            
            const childrenContainer = parentNode.querySelector('.tree-children');
            if (!childrenContainer) return;
            
            // åˆ›å»ºæ–°çš„è§„åˆ™èŠ‚ç‚¹
            const ruleNode = document.createElement('div');
            ruleNode.className = 'tree-node tree-node-level3 rule-item-new';
            ruleNode.setAttribute('data-rule-id', rule.id);
            ruleNode.innerHTML = `
                <span>${rule.name}</span>
                <button class="add-rule-btn" onclick="editRule('${rule.id}')">ç¼–è¾‘</button>
                <button class="add-rule-btn" onclick="viewRuleDetail('${rule.id}')" style="background: #4caf50;">æŸ¥çœ‹</button>
            `;
            
            childrenContainer.appendChild(ruleNode);
            
            // 3ç§’åç§»é™¤æ–°è§„åˆ™åŠ¨ç”»æ•ˆæœ
            setTimeout(() => {
                ruleNode.classList.remove('rule-item-new');
            }, 3000);
        }
        
        function viewRuleDetail(ruleId) {
            const rule = knowledgeBase.rules.find(r => r.id === ruleId);
            if (rule) {
                showRuleDetail(rule);
            }
        }
        
        // æŸ¥çœ‹åˆ†ç±»ä¸‹çš„æ‰€æœ‰è§„åˆ™
        function viewRulesByCategory(categoryId) {
            const rules = knowledgeBase.rules.filter(r => r.parent === categoryId);
            if (rules.length === 0) {
                alert('è¯¥åˆ†ç±»ä¸‹æš‚æ— è§„åˆ™');
                return;
            }
            
            // æ˜¾ç¤ºè§„åˆ™åˆ—è¡¨
            const content = rules.map(rule => `
                <div class="rule-detail-card" style="margin-bottom: 15px;">
                    <div class="rule-detail-header">
                        <div>
                            <div class="rule-detail-title">${rule.name}</div>
                            <div class="rule-detail-meta">ä¼˜å…ˆçº§: ${getPriorityName(rule.priority)}</div>
                        </div>
                        <div>
                            <button class="add-rule-btn" onclick="viewRuleDetail('${rule.id}'); closeDetailModal();">æŸ¥çœ‹è¯¦æƒ…</button>
                        </div>
                    </div>
                    <div class="rule-detail-content">${rule.description}</div>
                </div>
            `).join('');
            
            document.getElementById('rule-detail-modal').classList.add('active');
            document.getElementById('detail-modal-title').textContent = `${knowledgeBase.categories[categoryId]?.name || categoryId} - è§„åˆ™åˆ—è¡¨`;
            document.getElementById('rule-detail-content').innerHTML = `
                <div style="margin-bottom: 15px; color: #666;">å…±æ‰¾åˆ° ${rules.length} æ¡è§„åˆ™</div>
                ${content}
            `;
            document.getElementById('rule-detail-modal').setAttribute('data-rule-id', '');
        }
        
        // åˆå§‹åŒ–æ—¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            // é»˜è®¤å±•å¼€æ‰€æœ‰ä¸€çº§åˆ†ç±»
            document.querySelectorAll('.tree-node-level1 .tree-toggle').forEach(toggle => {
                if (!toggle.classList.contains('expanded')) {
                    toggle.click();
                }
            });
        });
        
        // é¡µé¢åˆ‡æ¢æ—¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        const originalShowPage = showPage;
        showPage = function(pageNum) {
            originalShowPage(pageNum);
            if (pageNum === 6) {
                updateStats();
                // ç¡®ä¿æœç´¢æ¡†æ¸…ç©º
                clearSearch();
            }
        };
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.addEventListener('click', function(event) {
            const ruleModal = document.getElementById('rule-modal');
            const detailModal = document.getElementById('rule-detail-modal');
            
            if (event.target === ruleModal) {
                closeRuleModal();
            }
            if (event.target === detailModal) {
                closeDetailModal();
            }
        });
        
        // åˆå§‹åŒ–
        showPage(1);
        
        // åˆå§‹åŒ–ä¿®æ”¹åå†…å®¹
        setTimeout(() => {
            updateModifiedContent();
            updateComparisonView();
        }, 500);
    </script>
</body>
</html>

