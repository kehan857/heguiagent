# 合规智能体使用说明

## 一、文件说明

### 1.1 前端页面文件
- **compliance_frontend.html**：简化的前端演示页面，包含三个核心功能模块
  - 知识库上传页面
  - 内容录入页面
  - 内容分析页面

### 1.2 Coze 智能体搭建文档
- **COZE智能体搭建方案.md**：详细的 Coze 智能体搭建指南
- **Coze提示词模板.md**：系统提示词和用户提示词模板
- **知识库文件示例.md**：知识库文件的格式示例

## 二、前端页面使用

### 2.1 打开页面
直接在浏览器中打开 `compliance_frontend.html` 文件即可使用。

### 2.2 功能说明

#### 知识库上传
1. 点击"知识库上传"标签页
2. 点击上传区域或拖拽文件到上传区域
3. 支持上传 PDF、Word、TXT 等格式文件
4. 点击"上传文件"按钮完成上传

#### 内容录入
1. 点击"内容录入"标签页
2. 在文本框中输入需要审核的内容
3. （可选）选择发布平台
4. 点击"开始审核"按钮提交审核

#### 内容分析
1. 审核完成后自动跳转到"内容分析"页面
2. 查看审核结果和修改建议
3. 点击替换词可一键应用替换
4. 点击"复制修改后内容"可复制到剪贴板
5. 点击"导出报告"可导出审核报告

### 2.3 API 集成（待实现）
当前页面为演示版本，审核功能为模拟数据。实际使用时需要：

1. 在 Coze 平台创建智能体并获取 API Key 和 Bot ID
2. 修改 `compliance_frontend.html` 中的 `callCozeAPI` 函数
3. 配置正确的 API 地址和认证信息

```javascript
// 需要修改的部分
async function callCozeAPI(content, platform) {
    const response = await fetch('https://api.coze.cn/v1/chat', {
        method: 'POST',
        headers: {
            'Authorization': 'Bearer YOUR_API_KEY',
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            bot_id: 'YOUR_BOT_ID',
            user_id: 'user123',
            query: `请对以下内容进行合规审核：\n${content}\n发布平台：${platform}`,
            stream: false
        })
    });
    
    const data = await response.json();
    return JSON.parse(data.answer);
}
```

## 三、Coze 智能体搭建

### 3.1 准备工作
1. 注册 Coze 账号：https://www.coze.cn/
2. 准备合规知识库文件（参考 `知识库文件示例.md`）
3. 阅读 `COZE智能体搭建方案.md` 了解详细步骤

### 3.2 搭建步骤概览
1. **创建智能体**
   - 登录 Coze 平台
   - 创建新智能体，命名为"合规智能体"

2. **配置知识库**
   - 创建知识库，命名为"合规知识库"
   - 按照分类上传知识库文件
   - 确保资质审核规则文件优先上传

3. **配置提示词**
   - 复制 `Coze提示词模板.md` 中的系统提示词
   - 粘贴到智能体的系统提示词设置中
   - 确保提示词中包含资质审核优先的说明

4. **配置工作流（可选）**
   - 按照 `COZE智能体搭建方案.md` 中的工作流设计配置
   - 设置知识库检索节点
   - 配置结果合并和输出节点

5. **测试智能体**
   - 使用测试用例测试智能体功能
   - 确保资质审核优先显示
   - 确保输出格式为 JSON

6. **获取 API 信息**
   - 获取 API Key
   - 获取 Bot ID
   - 配置到前端页面

### 3.3 关键配置要点

#### 资质审核优先
- 在系统提示词中明确说明资质审核的优先级
- 确保资质审核问题标记为 `priority: "critical"`
- 确保资质审核问题在输出中排序第一

#### JSON 格式输出
- 系统提示词中必须明确要求 JSON 格式输出
- 不要添加任何额外的文字说明
- 确保 JSON 格式有效且可解析

#### 知识库组织
- 资质审核规则单独分类，优先上传
- 按照一级、二级、三级分类组织
- 确保规则文件格式统一

## 四、知识库文件准备

### 4.1 文件格式
- 使用 Markdown 格式（.md）
- 参考 `知识库文件示例.md` 中的格式
- 包含规则说明、关键词列表、替换建议、案例等

### 4.2 文件分类
按照以下结构组织文件：
```
合规知识库/
├── 01_资质审核（优先）/
│   ├── 医疗资质审核规则.md
│   ├── 金融资质审核规则.md
│   └── 保险资质审核规则.md
├── 02_国家法律/
│   └── ...
├── 03_平台规则/
│   └── ...
└── 04_公司规则/
    └── ...
```

### 4.3 文件内容要求
- 明确标注优先级（critical/high/normal）
- 明确标注规则类型（qualification/legal/company/business）
- 提供详细的替换词建议
- 包含审核案例

## 五、常见问题

### Q1: 如何确保资质审核优先？
A: 在系统提示词中明确说明审核流程，第一步必须是资质审核。同时确保资质审核问题标记为 `priority: "critical"`，并在输出排序中优先显示。

### Q2: 如何更新知识库？
A: 在 Coze 平台的知识库管理中，可以随时添加新文件或更新现有文件。前端页面的知识库上传功能可以用于上传文件到服务器，然后手动添加到 Coze 知识库。

### Q3: 审核结果格式不正确怎么办？
A: 检查系统提示词中是否明确要求 JSON 格式输出，确保提示词中包含完整的 JSON 格式示例。如果仍有问题，可以调整提示词，强调必须严格按照 JSON 格式输出。

### Q4: 如何提高审核准确性？
A: 
1. 完善知识库内容，补充更多规则和案例
2. 优化提示词，明确审核规则和要求
3. 根据实际使用情况调整知识库检索参数
4. 定期更新知识库，添加新的法规和规则

## 六、后续优化建议

1. **前端功能增强**
   - 实现真实的 API 调用
   - 添加用户登录和权限管理
   - 添加审核历史记录功能
   - 优化移动端显示

2. **智能体优化**
   - 根据实际使用情况优化提示词
   - 增加更多审核规则
   - 优化知识库检索效果
   - 提升替换建议质量

3. **知识库维护**
   - 建立知识库更新机制
   - 定期检查新法规和规则
   - 根据审核反馈优化规则
   - 建立规则版本管理

---

**版本**：v1.0  
**更新日期**：2025-01-XX  
**维护人**：合规智能体项目组
